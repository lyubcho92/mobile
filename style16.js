if (self.CavalryLogger) { CavalryLogger.start_js(["qF+Gl"]); } __d("LoginNativeButton",["BanzaiLogger","DOM"],(function(a,b,c,d,e,f){"use strict";var g="native_login_button_click_client";e.exports={init:function(a,c){b("DOM").listen(a,"click",null,function(a){this._logClick(c)}.bind(this))},_logClick:function(a){var c=b("BanzaiLogger").create({retry:!0,delay:0});c.log("PlatformLoggedOutEventsLoggerConfig",{event:g,logger_id:a})}}}),null); __d("MLoggedOutBannerGooglePlayRedirectWithFallback",["BanzaiLogger","DirectDownloadEvents","DOM","UserAgent","clearInterval","clearTimeout","goURI","setInterval","setTimeout"],(function(a,b,c,d,e,f){var g=200,h=300,i=350,j=1500,k=2500;a=function(){"use strict";function a(a){this.$1=a.button,this.$2=a.native_app_url,this.$3=a.fallback_url,this.$4=a.logging_data,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=0,this.$10=!0,this.$11=b("DOM").create("iframe",{style:{display:"none"}}),b("DOM").insertAfter(this.$1,this.$11),b("BanzaiLogger").create({signal:!0,delay:1e3}).log("DirectDownloadLoggerConfig",{event:b("DirectDownloadEvents").logged_out_banner_impression_client,app_referrer:this.$4.app_referrer,app:this.$4.app,country:this.$4.country}),this.$12()}var c=a.prototype;c.$12=function(){var a=this;this.$1.addEventListener("click",function(){a.$13()});this.$10=!0};c.$13=function(){this.$10&&(this.$10=!1,this.$14(),this.$15())};c.$15=function(){var a=this;a.$9=Date.now();var c=function(){a.$16(a.$3)},d=function(){a.$17(a.$2,c)},e=function(){a.$6=b("setTimeout")(d,j),a.$18(a.$2,c)};a.$5=b("setInterval")(function(){a.$19()?a.$20():a.$9=Date.now()},g);b("UserAgent").isBrowser("Firefox")?e():d()};c.$17=function(a,c){var d=this;if(d.$19())return;b("clearTimeout")(d.$8);var e=!1;d.$11.src="";d.$11.onload=function(){e=!0,b("BanzaiLogger").create({signal:!0,delay:1e3}).log("DirectDownloadLoggerConfig",{event:b("DirectDownloadEvents").logged_out_banner_google_play_redirect_failed,app_referrer:d.$4.app_referrer,app:d.$4.app,country:d.$4.country}),c()};d.$11.src=a;d.$8=b("setTimeout")(function(){var b=d.$11.contentDocument||d.$11.contentWindow.document;b.readyState=="complete"&&!e&&d.$18(a,c)},i)};c.$18=function(a,c){if(this.$19())return;this.$7=b("setTimeout")(c,k);this.$16(a)};c.$20=function(){b("clearInterval")(this.$5),b("clearTimeout")(this.$6),b("clearTimeout")(this.$7),b("clearTimeout")(this.$8)};c.$19=function(){if(document.hidden||Date.now()-this.$9>=h){this.$10=!0;return!0}return!1};c.$16=function(a){if(this.$19())return;b("goURI")(a)};c.$14=function(){this.$4||(this.$4={app_referrer:"",app:"",country:""}),b("BanzaiLogger").create({signal:!0,delay:1e3}).log("DirectDownloadLoggerConfig",{event:b("DirectDownloadEvents").logged_out_banner_upgrade_button_click,app_referrer:this.$4.app_referrer,app:this.$4.app,country:this.$4.country})};return a}();e.exports=a}),null); __d("HeaderTransparencyConsentEventParam",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LOGIN_BUTTON_CLICK:"ln",REG_BUTTON_CLICK:"reg"})}),null); __d("MButton",["cx","invariant","CSS","DOM"],(function(a,b,c,d,e,f,g,h){var i="_2347";function j(a){b("DOM").isType(a,"button")||b("DOM").isType(a,"a")||h(0,2447,a.nodeType)}var k={isEnabled:function(a){j(a);a=a;a=a;return a.disabled===!1||b("DOM").isType(a,"a")&&!b("CSS").hasClass(a,i)},setEnabled:function(a,c){j(a);if(k.isEnabled(a)===c)return;a=a;a=a;b("DOM").isType(a,"button")?a.disabled=!c:(b("CSS").conditionClass(a,i,!c),c?(a.removeAttribute("tabindex"),a.removeAttribute("aria-disabled")):(a.setAttribute("tabindex","-1"),a.setAttribute("aria-disabled","true")))}};e.exports=k}),null); __d("MLoginEmailDomainTypeahead",["DOM","MRegTopDomainsConfig","MTypeaheadEmailDomainSource","Style","Typeahead"],(function(a,b,c,d,e,f){"use strict";var g=b("MRegTopDomainsConfig").topEmailDomains,h={};function a(a){if(g.length===0)return;try{var c=b("DOM").find(a,"input"),d=c.parentNode;d=new(b("Typeahead"))(d,c);var e=0;d.setDatasource(new(b("MTypeaheadEmailDomainSource"))([].concat(g),function(){return function(a){return{name:"@"+a,display:"@"+a,uri:"#",id:e++}}}));var f=null;d.listen("keydown",function(a){f=a});d.listen("show",function(b){b&&b.show&&b.show.length>0&&!h[a]&&(h[a]=!0)});d.listen("hide",function(){h[a]=!1});d.listen("choose",function(){f&&(f.kill(),f=null)});d.listen("rendered",function(){try{var d=b("DOM").find(a,"div","jx-typeahead-results"),e=c.parentNode.style.width;e&&b("Style").set(d,"width",e)}catch(a){}})}catch(a){}}e.exports={init:a}}),null); __d("MLoginFormError",["cx","invariant","CSS","DOM"],(function(a,b,c,d,e,f,g,h){"use strict";var i="_3qsy",j="_3qs-";a={set:function(a,c){c!==null||h(0,653),b("CSS").addClass(a,i),b("CSS").addClass(a,j),b("DOM").listen(a,"input",null,function(c){b("CSS").removeClass(a,j)})},unset:function(a){b("CSS").removeClass(a,i),b("CSS").removeClass(a,j)}};e.exports=a}),null); __d("MMsisdnJioApiModule",["DateConsts","DOM","KaiOSController","KaiOSSendMessageUtil","WebStorage","ZeroJioHeaderTypedLogger","promiseDone"],(function(a,b,c,d,e,f){"use strict";var g,h="login_identify_search_placeholder",i=2;function a(a){var c=(g||(g=b("WebStorage"))).getLocalStorage();if(c){var d=a.get("msisdn");c.setItem("fb_jio_msisdn_value",d?d:"");d=a.get("timeStamp");c.setItem("fb_jio_msisdn_timestamp",d?d:"");d=a.get("signature");c.setItem("fb_jio_msisdn_signature",d?d:"");d=a.get("unique");c.setItem("fb_jio_msisdn_salt",d?d:"")}}function c(){var a=(g||(g=b("WebStorage"))).getLocalStorage();if(!a)return null;var c=a.getItem("fb_jio_msisdn_timestamp");if(!c||Date.now()>Number(c)+i*b("DateConsts").MS_PER_DAY)return null;c=a.getItem("fb_jio_msisdn_value");var d=a.getItem("fb_jio_msisdn_timestamp"),e=a.getItem("fb_jio_msisdn_signature");a=a.getItem("fb_jio_msisdn_salt");if(!c||!d||!e||!a)return null;var f=new Map();f.set("fb_jio_msisdn_value",c);f.set("fb_jio_msisdn_timestamp",d);f.set("fb_jio_msisdn_signature",e);f.set("fb_jio_msisdn_salt",a);return f}function d(){var a=Date.now();j();b("promiseDone")(b("KaiOSController").waitForKaiOS(),function(){b("KaiOSController").sendMessageToAppWithCallback(b("KaiOSSendMessageUtil").Type.FETCH_MSISDN,function(b){k(Date.now()-a);var c=b.get("msisdn");c&&l.cacheMsisdn(b)})})}function j(a){new(b("ZeroJioHeaderTypedLogger"))().setEvent("jio_api_request").setJioAPISurface(a).log()}function k(a,c){new(b("ZeroJioHeaderTypedLogger"))().setEvent("jio_api_response").setResponseTime(a).setJioAPISurface(c).log()}function f(a){var c=Date.now(),d=b("DOM").find(a,"input",h);d.value||(j("account_recovery"),b("promiseDone")(b("KaiOSController").waitForKaiOS(),function(){b("KaiOSController").sendMessageToAppWithCallback(b("KaiOSSendMessageUtil").Type.FETCH_MSISDN,function(a){k(Date.now()-c,"account_recovery");a=a.get("msisdn");a&&(d.value=a,new(b("ZeroJioHeaderTypedLogger"))().setEvent("account_recovery_prefill").setTimeToPrefill(Date.now()-c).log())})}))}var l={cacheMsisdn:a,getCachedMsisdn:c,prefillMsisdnForAccountRecovery:f,logAPIRequest:j,logAPIResponse:k,fetchMsisdnAndCache:d};e.exports=l}),null); __d("XLoginProfileInfoFetcherController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/login/pp/",{contactpoint:{type:"String"},pwdprefill:{type:"Bool",defaultValue:!1}})}),null); __d("XOAuthLoggedOutAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/oauth/async/loggedout/",{})}),null); __d("XOAuthLoggedOutVerifyNonceAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/oauth/async/loggedout/verifynonce/",{})}),null); __d("XZeroHeaderUserConsentProcessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mobile/zero/h_consent/",{ce:{type:"Enum",required:!0,enumType:1}})}),null); __d("XZeroTokenHeaderUserConsentProcessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mobile/zero/TOS_process/",{})}),null); __d("MLoginController",["cx","fbt","BanzaiLogger","CSS","DataStore","DeferredCookie","DOM","Event","EventListener","FBLogger","HeaderTransparencyConsentEventParam","IorgMaskHeaderPrefillTypedLogger","Keys","LoggedOutLocaleEventsClientLogger","MAjaxify","MAnimator","MButton","MHistory","MLoginEmailDomainTypeahead","MLoginFormError","MMsisdnJioApiModule","MRequest","MViewport","Run","Stratcom","SubscriptionsHandler","URI","WebFunnelLogger","XAsyncRequest","XLoginProfileInfoFetcherController","XOAuthLoggedOutAsyncController","XOAuthLoggedOutVerifyNonceAsyncController","XZeroHeaderUserConsentProcessController","XZeroTokenHeaderUserConsentProcessController","bx","ge","goURI","FBBrowserPasswordEncryption","promiseDone","LoginServicePasswordEncryptDecryptEventTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j="_pg8",k="stepOneIdentification",l="stepTwoAuthenticaiton",m="auth",n=500,o=5;a={_initTwoStepsListeners:function(){var a=this,c,d=new(b("SubscriptionsHandler"))();d.addSubscriptions((c=b("Stratcom")).listen("click","m_login_change_cp_link",function(b){b.prevent(),a._logAction("clicked_not_you"),a._showEditableCPFieldOnAuthStep()}),c.listen("m:history:change",null,function(a){var c=a.getData();if(c.path){c=new(i||(i=b("URI")))(c.path);this._initialURI.getPath()===c.getPath()&&(a.prevent(),a.getData().soft===m?this._onEnteringCP():this._onBackToCP())}}.bind(this)),c.listen("click","m_login_next_btn",this._handleNextButtonClick.bind(this)));b("DOM").listen(this.oneTimePasswordLink,"click",null,this._onSendOneTimePassword.bind(this));c.listen("m:page:unload",null,function(){b("Stratcom").removeCurrentListener(),d.release()})},initRegButton:function(a){var c=a.root;this.regURI=a.regURI;this.regButton=b("DOM").find(c,"a","m_reg_button");this.regButton.removeAttribute("href");b("DOM").listen(this.regButton,"click",null,this._sendLoginRequestFromReg.bind(this))},initCloseButton:function(a){b("DOM").listen(a,"click",null,function(){window.close()})},initSendNotificationButton:function(a){var c=this;b("DOM").listen(a,"click",null,function(){c._sendLoginNotification()})},initForgotAccountLink:function(a){this.originalURL=a.root.getAttribute("href"),a.root.removeAttribute("href"),b("DOM").listen(a.root,"click",null,this._redirectToPrefilledForgotPassword.bind(this))},initLoginForm:function(a){var c=this;this.root=a.root;this.isTwoStepsLogin=a.isTwoStepsLogin;this.isActionLoggingEnabled=a.isActionLoggingEnabled;this.isCredsManagerEnabled=a.isCredsManagerEnabled;this.isCredsSavingEnabled=a.isCredsSavingEnabled;this.isPasswordlessEnabled=a.isPasswordlessEnabled;this.doNotShowUserHeader=a.doNotShowUserHeader;this.shouldWaitForPasswordSave=a.shouldWaitForPasswordSave;this.shouldPrefillJioHeaderForRegFromLogin=a.shouldPrefillJioHeaderForRegFromLogin;this.jioPrefilled=!1;this.igCPLogin=!1;this.shouldProcessUserConsentForTokenHeader=a.shouldProcessUserConsentForTokenHeader;this.shouldProcessUserConsentForHeader=a.shouldProcessUserConsentForHeader;this.onErrorRegURI=a.onErrorRegURI;this.loginForm=b("DOM").find(this.root,"form","m_login_form");this.loginForm.action=a.ajaxURI;this.loginButton=b("DOM").find(this.root,"button","m_login_button");var d=b("DOM").scry(this.root,"a","m_login_button_alt");d=d.pop();this.loginButtonAlt=null;this.isSmartLock=b("ge")("is_smart_lock");this.clearPrefillMaskOnKeydown=a.clearPrefillMaskOnKeydown;this.pubKeyData=a.pubKeyData;this.shouldUseEmailDomainTypeahead=a.shouldUseEmailDomainTypeahead;this.showDuoLikePasswordless=a.showDuoLikePasswordless;window.PublicKeyCredential&&window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable?window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable().then(function(a){a?c._authenticatorAvailableStatus="true":c._authenticatorAvailableStatus="false",c._logAction("authenticator_check")})["catch"](function(a){c._authenticatorAvailableStatus="error",c._logAction("authenticator_check")}):(this._authenticatorAvailableStatus="unsupported",this._logAction("authenticator_check"));d!==void 0&&(this.loginButtonAlt=d);(a.shouldShowSmartLockSelector||this._isCredentialsManagerEnabled())&&this._initSmartLockAccountChooser();this.isTwoStepsLogin?(this.hadCPPrefilled=!1,this.shouldClearPasswordIfOnlyPasswordPrefilled=!0,this._initialURI=(i||(i=b("URI"))).getRequestURI(),this.shouldAutoLandOnStep2=a.shouldAutoLandOnStep2,this.prefillContactpointHiddenInput=b("ge")("prefill_contact_point"),this.emailComponentsWrapper=b("ge")("email_components_wrapper"),this.passwordComponentWrapper=b("ge")("password_component_wrapper"),this.stepTwoCPDisplayContainer=b("ge")("step_two_cp_display"),this.nextButton=b("DOM").find(this.root,"button","m_login_next_btn"),this.cpText=b("DOM").scry(this.root,"span","m_login_cp_text").pop(),this.cpDisplayLabel=b("DOM").scry(this.root,"span","contactpoint_display_label").pop(),this.passwordFieldLabel=b("DOM").scry(this.root,"span","password_field_label").pop(),this.profilePicElem=b("DOM").scry(this.root,"*","profile_pic_elem").pop(),this.oneTimePasswordLink=b("DOM").scry(this.root,"a","one_time_password_link").pop(),this.otpSentMsg=b("DOM").scry(this.root,"div","otp_retrieve_desc").pop(),this.userName=b("DOM").scry(this.root,"span","m_recognized_user_name").pop(),this.moreLinks=b("DOM").scry(this.root,"div","m_login_more_links").pop(),this.progressBar=b("DOM").find(this.root.ownerDocument,"div","login_identify_step_progress_bar"),this.languageSelector=b("DOM").find(this.root.ownerDocument,"div","language_selector"),this.identifyStepElements=b("DOM").scry(this.root.ownerDocument,"div","login_identify_step_element"),this.identifyStepElements.push(this.languageSelector),this.passwordStepElements=b("DOM").scry(this.root.ownerDocument,"div","login_password_step_element"),this._initTwoStepsListeners(),b("DataStore").set(this.loginForm,"step",k)):this.prefillContactpointHiddenInput=b("ge")("m_login_email");this.loginButton.type="button";this.notice=b("DOM").find(this.root,"div","m_login_notice");this.emailInput=this._getElem("input","m_login_email");this.passwordInput=this._getElem("div","m_login_password");this.emailInputContainer=b("ge")("email_input_container");this.passwordInputDOM=b("DOM").find(this.passwordInput,"input");this.showDuoLikePasswordless&&(this.sendLoginNotificationButton=b("DOM").find(this.root,"button","login_notification_button"));this.tryNumber=this._getElem("input","m_login_try_number");this.unrecognizedTriesCountInput=this._getElem("input","m_login_unrecognized_tries");this.upsell=this._getElem("div","m_login_upsell");this.numPasswordErrorAttempts=0;this.unrecognizedContactpointErrorCount=0;this.originalPasswordPlaceholder=this.passwordInputDOM.getAttribute("placeholder");this.userInfoContainer=b("ge")("user_info_container");this.oauthLoginButtonContainer=b("ge")("oauth_login_button_container");this.oauthLoginDescContainer=b("ge")("oauth_login_desc_container");this.passwordLabelContainer=b("ge")("pwd_label_container");this.otpButtonContainer=b("ge")("otp_button_elem_container");this.otpRetrieveDescContainer=b("ge")("otp_retrieve_desc_container");this.userInfoAfterFailureElements=b("DOM").scry(this.root.ownerDocument,"div","user_info_after_failure_element");this.otpPasswordPlaceholder=h._("Password or one-off password");this.shouldPrefillJioHeaderForRegFromLogin&&b("MMsisdnJioApiModule").fetchMsisdnAndCache();this.shouldUseEmailDomainTypeahead&&this._initTypeahead();b("DOM").listen(this.loginButton,"click",null,this._handleSubmitButtonClick.bind(this));this.loginButtonAlt!==null&&b("DOM").listen(this.loginButtonAlt,"click",null,this._handleSubmitButtonClick.bind(this));this.hiddenInputPrefillSource=b("ge")("prefill_source");this.hiddenInputPrefillSource!==null&&this.hiddenInputPrefillSource.value==="header"&&this.clearPrefillMaskOnKeydown===!0&&b("DOM").listen(this.emailInput,"keydown",null,function(a){this.clearPrefillMaskOnKeydown===!0&&(this.clearPrefillMaskOnKeydown=!1,this.emailInput.value="",new(b("IorgMaskHeaderPrefillTypedLogger"))().setEvent("clear_masked_prefill_login").log())}.bind(this));d=a.listenKeyDown?"keydown":"keyup";this.isTwoStepsLogin?(this.nextButton.setAttribute("type","button"),this.passwordInputDOM.setAttribute("tabindex",-1),b("DOM").listen(this.loginForm,"keydown",null,function(a){a.getRawEvent().keyCode===b("Keys").RETURN?b("DataStore").get(this.loginForm,"step","")===k?this._handleNextButtonClick():this._handleSubmitButtonClick():a.getRawEvent().keyCode===b("Keys").TAB&&b("DataStore").get(this.loginForm,"step","")===k&&this._handleNextButtonClick()}.bind(this))):b("DOM").listen(this.loginForm,d,null,function(a){a.getRawEvent().keyCode===b("Keys").RETURN&&this._handleSubmitButtonClick()}.bind(this));a.clearOnDelete&&b("DOM").listen(this.emailInput,d,null,function(a){a.getRawEvent().keyCode===b("Keys").BACKSPACE&&(this.emailInput.value="")}.bind(this));if(this.isActionLoggingEnabled){(d=b("Stratcom")).listen("change","m_login_email",function(a){this._logAction("changed_user_identifier"),this.shouldDisplayOTPMsg=!1,this.displayOTPLink=!1,this._rerenderAuthStepCPDisplay()}.bind(this));d.listen("change","m_login_password",function(a){this._logAction("changed_password")}.bind(this));d.listen("click","m_reg_button",function(a){this.emailInput.value===""?this._logAction("clicked_reg_identifier_blank"):this._logAction("clicked_reg_identifier_filled"),this.passwordInputDOM.value===""?this._logAction("clicked_reg_password_blank"):this._logAction("clicked_reg_password_filled")}.bind(this));d.listen("click","language_selector",function(a){c.clickedLanguageSelector||(c._logAction("clicked_language_selector"),c.clickedLanguageSelector=!0)});b("Event").listen(this.root,"click",function(){c._logAction("clicked_on_login_screen")});this.hasFocusedAlready=!1;this.hasSentLoginNotification=!1;b("Run").onAfterLoad(function(){this._logAction("form_load_client")}.bind(this));d=b("DOM").scry(this.root,"input",null);d.forEach(function(a){b("Event").listen(a,"focus",c._processFormFocus.bind(c))})}this.shouldAutoLandOnStep2&&this.emailInput.value.trim()!==""&&(this.hadCPPrefilled=!0,b("MHistory").pushSoftState(m));b("Stratcom").listen("click",["change_language"],function(d){new(b("LoggedOutLocaleEventsClientLogger"))(c.root,a.datrCookie).logLocaleEvent(d,"login","login")});b("Stratcom").listen("click",["more_language"],function(d){new(b("LoggedOutLocaleEventsClientLogger"))(c.root,a.datrCookie).logMoreLanguage("login","login")})},initAccountRecoveryFunnelLogging:function(a,c,d){b("EventListener").listen(a,"click",function(){new(b("WebFunnelLogger"))("MTouchAccountRecoveryFunnelDefinition").setAction(c).setSessionKey(d).log()})},_initTypeahead:function(){try{var a=this.emailInputContainer;b("MLoginEmailDomainTypeahead").init(a)}catch(a){}},_initSmartLockAccountChooser:function(a){var c=this;a===void 0&&(a="silent");window.PasswordCredential&&(this._logAction("smart_lock_supported"),navigator.credentials!==null&&(this._logAction("smart_lock_showed"),navigator.credentials.get({password:!0,mediation:a}).then(function(b){b!==null&&b.type==="password"&&b.password!==null&&b.id!==null?(c.emailInput.setAttribute("value",b.id),c.passwordInputDOM.setAttribute("value",b.password),c._logAction("smart_lock_selected"),c.isSmartLock.setAttribute("value",!0),a==="required"&&c._sendLoginRequest()):(c.passwordInputDOM.setAttribute("value",""),c._logAction("smart_lock_canceled"),a==="silent"&&c._initSmartLockAccountChooser("required"))})["catch"](function(a){b("FBLogger")("login").catching(a).warn("smart lock promise fail")})))},_processFormFocus:function(a){this._logFormFocus()},_sendLoginNotification:function(){var a=this;if(this.hasSentLoginNotification)return;this.hasSentLoginNotification=!0;var c=this.emailInput.value,d=new(i||(i=b("URI")))(window.location.href),e=d.getQueryData().app_id;if(e==null)return;d=new i(new i(this.loginForm.action).getQueryData().next);var f=d.getQueryData().logger_id;new(b("XAsyncRequest"))().setMethod("POST").setData({contact_point:c,app_id:e,logger_id:f}).setURI(b("XOAuthLoggedOutAsyncController").getURIBuilder().getURI()).setHandler(function(b){b=b.payload;b instanceof Object&&b.nonce!==""&&(a._passwordlessPollingData={nonce:b.nonce,app_id:e,logger_id:f},a._passwordlessPollingTimer=window.setInterval(a._pollPasswordlessNonce.bind(a),2e3))}).send()},_pollPasswordlessNonce:function(){var a=this;new(b("XAsyncRequest"))().setMethod("POST").setURI(b("XOAuthLoggedOutVerifyNonceAsyncController").getURIBuilder().getURI()).setData(this._passwordlessPollingData).setHandler(function(c){c=c.payload;if(c.result==="success"){window.clearInterval(a._passwordlessPollingTimer);var d=new(i||(i=b("URI")))(new i(a.loginForm.action).getQueryData().next);d.addQueryData("l_nonce",a._passwordlessPollingData.nonce);b("goURI")(d.toString())}else c.result==="denied"&&window.clearInterval(a._passwordlessPollingTimer)}).send()},_logFormFocus:function(){if(this.hasFocusedAlready)return;this.hasFocusedAlready=!0;this._logAction("form_focus")},_getElem:function(a,c){a=b("DOM").scry(this.root,a,c);return a.length===0?null:a[0]},_animateScrollToElem:function(a){if(!a)return;var c=b("MViewport").getScrollPos().y,d=a.offsetTop;a=function(a){b("MViewport").scrollTo(0,c+a*(d-c-o))};new(b("MAnimator"))().start(a,null,function(){},n)},_autoFocusIfNeeded:function(a){if(!this.emailInput||!this.passwordInput)return;if(!this.passwordInputDOM)return;var b=this.emailInput.value===""||a.m_login_email.error;a=this.passwordInputDOM.value===""||a.m_login_password.error;(b||a)&&(b?this.emailInput.focus():a&&this.passwordInputDOM.focus())},_sendLoginRequest:function(){var a=this;b("DeferredCookie").flushAllCookies();b("CSS").hide(this.notice);b("MButton").setEnabled(this.loginButton,!1);this.isTwoStepsLogin&&b("MButton").setEnabled(this.nextButton,!1);window.setTimeout(b("MButton").setEnabled.bind(null,this.loginButton,!0),15e3);this.loginButtonAlt!==null&&(b("MButton").setEnabled(this.loginButtonAlt,!1),window.setTimeout(b("MButton").setEnabled.bind(null,this.loginButtonAlt,!0),15e3));this.tryNumber!==null&&this.tryNumber.setAttribute("value",this.numPasswordErrorAttempts);this.unrecognizedTriesCountInput!==null&&(this.unrecognizedTriesCountInput.value=this.unrecognizedContactpointErrorCount);var c=new(i||(i=b("URI")))(this.loginForm.action).addQueryData("ig_cp_login",this.igCpLogin),d="#PWD_BROWSER",e=5,f=Math.floor(Date.now()/1e3).toString();try{if((window.crypto||window.msCrypto)&&this.pubKeyData){var g=b("FBBrowserPasswordEncryption");g=g.encryptPassword;var h=b("promiseDone");h(g(this.pubKeyData.keyId,this.pubKeyData.publicKey,this.passwordInputDOM.value,f),function(d){d=b("DOM").create("input",{type:"hidden",name:"encpass",value:d});a.loginForm.appendChild(d);a.passwordInputDOM.removeAttribute("name");a.loginForm.action=c.toString();b("MAjaxify").form(null,a.loginForm,null,"nocache",null,!0,[{response:a._onLoginResponse.bind(a)}])},function(g){var h=b("LoginServicePasswordEncryptDecryptEventTypedLogger");new h().setError("BrowserEncryptionFailure").setErrorMessage(g.message).setPasswordTag(d).setPasswordEncryptionVersion(e).setPasswordTimestamp(f).logVital();a.loginForm.action=c.toString();b("MAjaxify").form(null,a.loginForm,null,"nocache",null,!0,[{response:a._onLoginResponse.bind(a)}])});return}}catch(a){h=b("LoginServicePasswordEncryptDecryptEventTypedLogger");new h().setError("BrowserEncryptionClientFailure").setErrorMessage(a.message).setPasswordTag(d).setPasswordEncryptionVersion(e).setPasswordTimestamp(f).logVital()}if(!(window.crypto||window.msCrypto)&&this.pubKeyData){g=b("LoginServicePasswordEncryptDecryptEventTypedLogger");new g().setError("BrowserEncryptionFailure").setErrorMessage("Crypto object is undefined").setPasswordTag(d).setPasswordEncryptionVersion(e).setPasswordTimestamp(f).logVital()}this.loginForm.action=c.toString();b("MAjaxify").form(null,this.loginForm,null,"nocache",null,!0,[{response:this._onLoginResponse.bind(this)}])},_sendLoginRequestFromReg:function(){b("DeferredCookie").flushAllCookies();this.shouldProcessUserConsentForTokenHeader&&this._processUserConsentForTokenHeader();this.shouldProcessUserConsentForHeader&&this._processUserConsentForHeader("reg");if(this.emailInput.value===""||this.passwordInput.value===""){b("goURI")(this.regURI);return}b("CSS").hide(this.notice);b("MButton").setEnabled(this.loginButton,!1);window.setTimeout(b("MButton").setEnabled.bind(null,this.loginButton,!0),15e3);this.loginButtonAlt!==null&&(b("MButton").setEnabled(this.loginButtonAlt,!1),window.setTimeout(b("MButton").setEnabled.bind(null,this.loginButtonAlt,!0),15e3));b("MAjaxify").form(null,this.loginForm,null,"nocache",null,!0,[{response:this._onLoginFromRegResponse.bind(this)}])},_redirectToPrefilledForgotPassword:function(){if(this.emailInput===null){b("goURI")(this.originalURL);return}var a=this.emailInput.value.trim();if(a===""){b("goURI")(this.originalURL);return}a=new(i||(i=b("URI")))(this.originalURL).addQueryData("cpp",a);b("goURI")(a)},_updatePagePrefillState:function(){var a=b("ge")("first_prefill_type"),c=null;a!=null&&a.value!==""&&(c=a.value);a=b("ge")("first_prefill_source");var d=null;a!=null&&a.value!==""&&(d=a.value);a=b("ge")("prefill_type");var e=null;a!=null&&a.value!==""&&(e=a.value);a=b("ge")("prefill_source");var f=null;a!=null&&a.value!==""&&(f=a.value);a=b("ge")("had_cp_prefilled");var g=null;a!=null&&a.value!==""&&(g=a.value);a=b("ge")("had_password_prefilled");var h=null;a!=null&&a.value!==""&&(h=a.value);this.pagePrefillState={first_prefill_type:c,first_prefill_source:d,prefill_type:e,prefill_source:f,had_cp_prefilled:g,had_password_prefilled:h}},_logAction:function(a){if(!this.isActionLoggingEnabled)return;this._updatePagePrefillState();b("BanzaiLogger").create({signal:!0}).log("LoginEventsLoggerConfig",{event:a,first_prefill_type:this.pagePrefillState.firstPrefillType,first_prefill_source:this.pagePrefillState.firstPrefillSource,prefill_type:this.pagePrefillState.prefillType,prefill_source:this.pagePrefillState.prefillSource,had_cp_prefilled:this.pagePrefillState.hadCPPrefilled,had_password_prefilled:this.pagePrefillState.hadPasswordPrefilled,authenticator_available_status:this._authenticatorAvailableStatus})},_handleSubmitButtonClick:function(){this._logAction("clicked_submit"),this.emailInput!==null&&this.emailInput.value===""?this._logAction("clicked_submit_identifier_blank"):this._logAction("clicked_submit_identifier_filled"),this.passwordInputDOM.value===""?this._logAction("clicked_submit_password_blank"):this._logAction("clicked_submit_password_filled"),this.shouldProcessUserConsentForTokenHeader&&this._processUserConsentForTokenHeader(),this.shouldProcessUserConsentForHeader&&this._processUserConsentForHeader("ln"),this._sendLoginRequest()},_processUserConsentForTokenHeader:function(){var a=b("XZeroTokenHeaderUserConsentProcessController").getURIBuilder().getURI();new(b("MRequest"))(a).setMethod("POST").send()},_processUserConsentForHeader:function(a){a=b("XZeroHeaderUserConsentProcessController").getURIBuilder().setEnum("ce",a).getURI();new(b("MRequest"))(a).setMethod("POST").send()},_showBlankPWError:function(a){b("DOM").setContent(this.notice,this._getBlankPasswordErrorFBT(a)),b("CSS").show(this.notice)},_onSendOneTimePassword:function(a){var c=this;a.prevent();b("MAjaxify").ajaxify(null,null,new(b("MRequest"))(this.otp_uri).setMethod("POST"),null,[{response:function(a){a=a.payload;if(a.msg===null)return;b("DOM").setContent(c.otpSentMsg,a.msg);c.shouldDisplayOTPMsg=!0;c._rerenderAuthStepCPDisplay()}}])},_populateProfileInfo:function(a){var c=this;if(this.doNotShowUserHeader){a();return}this._updatePagePrefillState();var d=b("XLoginProfileInfoFetcherController").getURIBuilder().setString("contactpoint",this.emailInput.value).setBool("pwdprefill","true"===this.pagePrefillState.had_password_prefilled).getURI();b("MAjaxify").ajaxify(null,null,new(b("MRequest"))(d).setMethod("GET"),null,[{response:function(d){c.nextButton.disabled=!1;if(!d.payload){a();return}d=d.payload;if(d.profile_pic_elem){var e=c.profilePicElem.parentNode;b("DOM").replace(c.profilePicElem,d.profile_pic_elem);c.profilePicElem=b("DOM").scry(e,"*","profile_pic_elem").pop();c.displayProfilePic=!0}d.user_name&&c.userName&&(b("DOM").setContent(c.userName,d.user_name||c.emailInput.value),c.displayUserName=!0);d.otp_uri&&c.oneTimePasswordLink&&(c.otp_uri=d.otp_uri,c.displayOTPLink=!0);a()}}])},_getBlankEmailErrorFBT:function(){var a=h._("Sign up for an account."),c=b("DOM").create("a");c.setAttribute("href",this.onErrorRegURI);b("DOM").setContent(c,a);return h._("The email address or phone number that you've entered doesn't match any account. {reg_uri}",[h._param("reg_uri",c)])},_getBlankPasswordErrorFBT:function(a){var c=h._("Did you forget your password?"),d=b("DOM").create("a");d.setAttribute("href",a.forgot_password_uri);b("DOM").setContent(d,c);return h._("Please enter your password. {recovery_uri}",[h._param("recovery_uri",d)])},_onEnteringCP:function(){if(this.emailInput.value.trim()===""){b("DOM").setContent(this.notice,this._getBlankEmailErrorFBT());b("CSS").show(this.notice);b("MLoginFormError").set(this.emailInput,"error");b("DataStore").set(this.emailInput,"error",!0);b("MHistory").popSoftState(m);return}b("MLoginFormError").unset(this.emailInput);b("DataStore").set(this.emailInput,"error",!1);b("DataStore").get(this.passwordInput,"error",!1)||b("CSS").hide(this.notice);this.nextButton.disabled=!0;this._enableProgressBar();this._populateProfileInfo(this._goToPasswordStep.bind(this));return},_onBackToCP:function(){b("DataStore").get(this.passwordInput,"error",!1)&&(b("CSS").hide(this.notice),b("DataStore").set(this.passwordInput,"error",!1),b("CSS").removeClass(this.passwordInput,j)),this._goToIdentificationStep()},_hideAll:function(a){a.forEach(function(a){return b("CSS").hide(a)})},_showAll:function(a){a.forEach(function(a){return b("CSS").show(a)})},_rerenderAuthStepCPDisplay:function(){this.displayUserName&&(this.cpText&&b("CSS").hide(this.cpText),this.cpDisplayLabel&&b("CSS").hide(this.cpDisplayLabel),this.userName&&b("CSS").show(this.userName));this.profilePicElem&&b("CSS").conditionShow(this.profilePicElem,!!this.displayProfilePic);this.oneTimePasswordLink&&b("CSS").conditionShow(this.oneTimePasswordLink,!!this.displayOTPLink);this.otpSentMsg&&(b("CSS").conditionShow(this.otpSentMsg,!!this.shouldDisplayOTPMsg),this.shouldDisplayOTPMsg?(this.passwordInputDOM.setAttribute("placeholder",this.otpPasswordPlaceholder),this._animateScrollToElem(this.passwordFieldLabel)):this.passwordInputDOM.setAttribute("placeholder",this.originalPasswordPlaceholder));if(!this.stepTwoCPDisplayContainer||!this.emailComponentsWrapper)return;var a=this.displayUserName||this.displayProfilePic;b("CSS").conditionShow(this.stepTwoCPDisplayContainer,!!a);b("CSS").conditionShow(this.emailComponentsWrapper,!a)},_showEditableCPFieldOnAuthStep:function(){this.displayProfilePic=!1,this.displayUserName=!1,this.displayOTPLink=!1,this._rerenderAuthStepCPDisplay(),this.emailInput.focus()},_goToPasswordStep:function(){b("DataStore").set(this.loginForm,"step",l);this.prefillContactpointHiddenInput.value!==this.emailInput.value&&this.passwordInputDOM.setAttribute("value","");if(this.shouldClearPasswordIfOnlyPasswordPrefilled){var a=b("ge")("had_cp_prefilled"),c=b("ge")("had_password_prefilled");a!=null&&c!=null&&(a.value==null||a.value==="false")&&c.value==="true"&&(this.shouldClearPasswordIfOnlyPasswordPrefilled=!1)}this._hideAll(this.identifyStepElements);this._showAll(this.passwordStepElements);this._rerenderAuthStepCPDisplay();this.moreLinks&&b("CSS").addClass(this.moreLinks,"_2pie");b("CSS").removeClass(this.passwordInput,"_1-z5");b("CSS").removeClass(this.passwordComponentWrapper,"_1-z5");this.passwordInputDOM.removeAttribute("tabindex");this.showDuoLikePasswordless&&(this.sendLoginNotificationButton.style.display="block");this.cpText&&b("DOM").setContent(this.cpText,this.emailInput.value);this.passwordInputDOM.focus()},_resetProgressBar:function(){this.progressBar.style.transitionDuration="0ms",this.progressBar.style["-webkit-transition-duration"]="0ms",this.progressBar.style["-moz-transition-duration"]="0ms",this.progressBar.style.transform="translateX(0%)",this.progressBar.style["-webkit-transform"]="translateX(0%)",this.progressBar.style["-moz-transform"]="translateX(0%)"},_enableProgressBar:function(){this.progressBar.style.transitionDuration="1000ms",this.progressBar.style["-webkit-transition-duration"]="1000ms",this.progressBar.style["-moz-transition-duration"]="1000ms",this.progressBar.style.transform="translateX(100%)",this.progressBar.style["-webkit-transform"]="translateX(100%)",this.progressBar.style["-moz-transform"]="translateX(100%)"},_goToIdentificationStep:function(){b("DataStore").set(this.loginForm,"step",k),this._resetProgressBar(),this.displayUserName=!1,this.displayProfilePic=!1,this.displayOTPLink=!1,this.cpText&&b("CSS").show(this.cpText),this.cpDisplayLabel&&b("CSS").show(this.cpDisplayLabel),this.userName&&(b("DOM").setContent(this.userName,""),b("CSS").hide(this.userName)),b("CSS").addClass(this.passwordInput,"_1-z5"),b("CSS").addClass(this.passwordComponentWrapper,"_1-z5"),this.passwordInputDOM.setAttribute("tabindex",-1),this._hideAll(this.passwordStepElements),this._showAll(this.identifyStepElements),b("DataStore").get(this.emailInput,"error",!1)&&b("DOM").hide(this.upsell),this.moreLinks&&b("CSS").removeClass(this.moreLinks,"_2pie"),this.emailInput.focus()},_handleNextButtonClick:function(){this.passwordInputDOM.value.trim()!==""&&this.prefillContactpointHiddenInput&&this.prefillContactpointHiddenInput.value===this.emailInput.value&&(this.hadCPPrefilled=!0),b("MHistory").pushSoftState(m)},_mayBeShowTwoStepsLoginAfterPwdFailure:function(a){var c=this;a=a.two_steps_after_failuer_payload;if(!a)return;var d=a.profileInfo,e=a.passwordFieldLabelElem;if(!d||!e)return;this.userInfoContainer&&b("DOM").setContent(this.userInfoContainer,d);this.passwordLabelContainer&&b("DOM").setContent(this.passwordLabelContainer,e);this._showAll(this.userInfoAfterFailureElements);b("CSS").hide(this.emailInput);b("Stratcom").listen("click","m_login_change_cp_link",function(a){a.prevent(),b("CSS").show(c.emailInput),c._hideAll(c.userInfoAfterFailureElements)});d=a.otpButtonElem;e=a.otpURI;a=a.otpRetrieveDescElem;if(!d||!e||!a)return;this.otpButtonContainer&&b("DOM").setContent(this.otpButtonContainer,d);this.otpRetrieveDescContainer&&b("DOM").setContent(this.otpRetrieveDescContainer,a);this.otpSentMsg=b("DOM").find(this.otpRetrieveDescContainer,"div","otp_retrieve_desc");this.otp_uri=e;this.displayOTPLink=!0;this.oneTimePasswordLink=b("DOM").scry(this.otpButtonContainer,"a","one_time_password_link").pop();b("DOM").listen(this.oneTimePasswordLink,"click",null,this._onSendOneTimePassword.bind(this));this._rerenderAuthStepCPDisplay()},_mayBeShowOAuthLoginAfterPwdFailure:function(a){a=a.oauth_login_elem_payload;if(!a)return;var c=a.oAuthButton;a=a.oAuthDesc;if(!c)return;this.oauthLoginButtonContainer&&b("DOM").setContent(this.oauthLoginButtonContainer,c);b("CSS").show(this.oauthLoginButtonContainer);if(!a)return;this.oauthLoginDescContainer&&b("DOM").setContent(this.oauthLoginDescContainer,a);b("CSS").show(this.oauthLoginDescContainer)},_mayBeShowFamilyAuthLoginAfterPwdFailure:function(a){var c=this;this.igCpLogin=!0;a=a.familyAuthDesc;this.languageSelector=b("DOM").find(this.root.ownerDocument,"div","language_selector");this.footerElem=b("DOM").find(this.root.ownerDocument,"div","m_login_footer");this.root&&this.root.parentNode&&this.root.parentNode.parentNode&&(b("DOM").setContent(this.root,a),b("CSS").hide(this.languageSelector),b("CSS").hide(this.footerElem));var d=b("DOM").find(this.root,"button","family_auth_login_button");if(!a)return;b("Event").listen(d,"click",function(a){a.preventDefault(),c._sendLoginRequest()})},_isCredentialsManagerEnabled:function(){return Boolean(this.isCredsManagerEnabled&&this._isCredentialsSavingEnabled())},_isCredentialsSavingEnabled:function(){return Boolean(this.isCredsSavingEnabled&&window.PasswordCredential&&navigator.credentials&&navigator.credentials.get&&navigator.credentials.store)},_onLoginResponse:function(a){this.passwordInputDOM.setAttribute("name","pass");b("MButton").setEnabled(this.loginButton,!0);this.isTwoStepsLogin&&b("MButton").setEnabled(this.nextButton,!0);this.loginButtonAlt!==null&&b("MButton").setEnabled(this.loginButtonAlt,!0);if(!a.payload)return;var c=a.payload;this.isSmartLock.setAttribute("value",!1);c.m_login_password.error?this.numPasswordErrorAttempts++:this.numPasswordErrorAttempts=0;c.m_login_email.unrecognized&&this.unrecognizedContactpointErrorCount++;c.m_login_notice&&(b("DOM").setContent(this.notice,c.m_login_notice),c.m_login_password.error&&this.passwordInputDOM.value.trim()===""&&this._showBlankPWError(a.payload),b("CSS").show(this.notice));if(this.emailInput!==null){c.m_login_email.error?(b("MLoginFormError").set(this.emailInput,"error"),b("DataStore").set(this.emailInput,"error",!0),this.isTwoStepsLogin&&(this.shouldDisplayOTPMsg=!1,this._rerenderAuthStepCPDisplay())):(b("MLoginFormError").unset(this.emailInput),b("DataStore").set(this.emailInput,"error",!1));var d=c.m_login_email.value;d?(this.emailInput.value=d,this.isTwoStepsLogin&&this.cpText&&b("DOM").setContent(this.cpText,d)):this.emailInput.value=""}if(this.passwordInput!==null){d=c.family_auth_login_elem_payload;d===null&&(b("DOM").find(this.passwordInput,"input").value="");b("Stratcom").invoke("m:passwordinput:autoclear","password-plain-text-toggle-input");c.m_login_password.error?(b("DataStore").set(this.passwordInput,"error",!0),b("CSS").addClass(this.passwordInput,j),this.isTwoStepsLogin&&b("DataStore").get(this.loginForm,"step","")===k&&b("MHistory").pushSoftState(m),this.isTwoStepsLogin&&this._populateProfileInfo(this._rerenderAuthStepCPDisplay.bind(this)),this._mayBeShowTwoStepsLoginAfterPwdFailure(c),this._mayBeShowOAuthLoginAfterPwdFailure(c)):(b("DataStore").set(this.passwordInput,"error",!1),b("CSS").removeClass(this.passwordInput,j));d!==null&&this._mayBeShowFamilyAuthLoginAfterPwdFailure(d)}this._autoFocusIfNeeded(a.payload);this.upsell!==null&&b("DOM").hide(this.upsell);b("Stratcom").invoke("m:kaios:spatialnav:refresh",null,null)},_onLoginFromRegResponse:function(a){b("goURI")(this.regURI)},redirect:function(a){var c=this;if(!this._isCredentialsManagerEnabled())window.location.replace(a);else{var d=b("bx").getURL(b("bx")("875231"));d=new window.PasswordCredential({id:this.emailInput.value,password:this.passwordInputDOM.value,iconURL:d});try{var e=!1,f=0;navigator.credentials&&navigator.credentials.store(d).then(function(){c._logAction("creds_manager_finished"),e=!0})["catch"](function(a){c._logAction("creds_manager_error"),b("FBLogger")("creds_manager").catching(a).warn("creds_manager_error"),e=!0});if(this.shouldWaitForPasswordSave)var g=window.setInterval(function(){f>5?(window.clearInterval(g),e||c._logAction("creds_manager_incomplete"),window.location.replace(a)):f++},500);else window.location.replace(a)}catch(c){this._logAction("creds_manager_exception"),b("FBLogger")("creds_manager").catching(c).warn("creds_manager_exception"),window.location.replace(a)}}}};e.exports=a}),null); __d("MLoginView",["cx","CSS","DeferredCookie","DOM","MButton","Stratcom","ge"],(function(a,b,c,d,e,f,g){var h={disableOnSubmit:function(a,c){b("DOM").listen(a,"submit",null,function(){b("DeferredCookie").flushAllCookies(),b("MButton").setEnabled(c,!1),window.setTimeout(b("MButton").setEnabled.bind(null,c,!0),15e3)})},appSwitch:function(a){window.location.replace(a)},showForm:function(a,c,d){b("DOM").listen(a,"click",null,function(d){b("DOM").remove(a);b("CSS").removeClass(c,"_7tb");d=b("DOM").scry(b("ge")("root"),"div","m_login_form_title");if(d.length>0){d=d[0];d instanceof HTMLElement&&b("DOM").remove(d)}window.setTimeout(function(){b("Stratcom").invoke("m:kaios:spatialnav:refresh",null,null),h.snapFocusToUsernameTextField()},150)})},snapFocusToUsernameTextField:function(){var a=b("ge")("m_login_email");a=a?b("DOM").find(a,"input"):null;a instanceof HTMLElement&&a.focus()}};e.exports=h}),null); __d("XOauthDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/dialog/oauth/",{app_id:{type:"Int"},auth_method:{type:"Enum",defaultValue:"",enumType:1},facebook_sdk_version:{type:"String"},calling_package_key:{type:"String"},context_uri:{type:"String"},default_audience:{type:"Enum",enumType:1},display:{type:"Enum",enumType:1},domain:{type:"String"},encoded_state:{type:"String"},fallback_redirect_uri:{type:"String"},force_confirmation:{type:"Bool",defaultValue:!1},kid_directed_site:{type:"Bool",defaultValue:!1},install_nonce:{type:"String"},legacy_override:{type:"String"},logged_out_behavior:{type:"Enum",enumType:0},logger_id:{type:"String"},loyalty_program_id:{type:"Int"},loyalty_ad_id:{type:"String"},native_login_button:{type:"Bool",defaultValue:!1},original_redirect_uri:{type:"String"},privacyx:{type:"String"},redirect_uri:{type:"String"},ref:{type:"String"},return_format:{type:"EnumVector",enumType:{member:1}},return_scopes:{type:"Bool",defaultValue:!1},scope:{type:"StringVector"},scope_objects:{type:"String"},scope_objects_count:{type:"String"},sdk:{type:"String"},sdk_version:{type:"String"},seen_scopes:{type:"String"},sheet_name:{type:"String"},state:{type:"String"},user_mobile_phone:{type:"String"},android_key:{type:"String"},sso:{type:"String"},sso_device:{type:"Enum",enumType:1},sso_key:{type:"String"},nonce:{type:"String"},user_code:{type:"String"},auth_type:{type:"String"},auth_nonce:{type:"String"},ret:{type:"String"},fbs:{type:"Int",defaultValue:-1},fbapp_pres:{type:"Bool",defaultValue:!1},response_type:{type:"String",defaultValue:"code"},ignore_reentry:{type:"Bool",defaultValue:!1},type:{type:"Enum",enumType:1},l_nonce:{type:"String"},cbt:{type:"Int"},ies:{type:"Bool",defaultValue:!1},cct_over_app_switch:{type:"Bool",defaultValue:!1},cct_prefetching:{type:"Bool",defaultValue:!1},page_id_account_linking:{type:"Int"},is_first_party_account_linking:{type:"Bool",defaultValue:!1},aid:{type:"Int"},referral_code:{type:"String"}})}),null); __d("DamerauLevenshtein",[],(function(a,b,c,d,e,f){a={DamerauLevenshteinDistance:function(a,b){if(a.length===0)return b.length;if(b.length===0)return a.length;if(a===b)return 0;var c,d,e=[];e[0]=[];e[1]=[];e[2]=[];for(d=0;d<=b.length;d++)e[0][d]=d;for(c=1;c<=a.length;c++)for(d=1;d<=b.length;d++){e[c%3][0]=c;var f=a.charAt(c-1)===b.charAt(d-1)?0:1;e[c%3][d]=Math.min(e[(c-1)%3][d]+1,e[c%3][d-1]+1,e[(c-1)%3][d-1]+f);c>1&&d>1&&a.charAt(c-1)==b.charAt(d-2)&&a.charAt(c-2)==b.charAt(d-1)&&(e[c%3][d]=Math.min(e[c%3][d],e[(c-2)%3][d-2]+f))}return e[a.length%3][b.length]}};e.exports=a}),null); __d("BrowserPrefillLogging",["BanzaiLogger","DamerauLevenshtein","ge"],(function(a,b,c,d,e,f){"use strict";a={initContactpointFieldLogging:function(a){this.contactpointFieldID=a.contactpointFieldID;this._updateContactpoint();this.serverPrefillContactpoint=a.serverPrefill;a=b("ge")(this.contactpointFieldID);if(a==null)return;a.addEventListener("input",this._mayLogContactpointPrefillViaDropdown.bind(this));window.addEventListener("load",this._mayLogContactpointPrefillOnload.bind(this));return},registerCallback:function(a){this.regeisteredCallbacks=this.regeisteredCallbacks||[],this.regeisteredCallbacks.push(a)},_invokeCallbacks:function(a,b){if(this.regeisteredCallbacks==null||this.regeisteredCallbacks.size===0)return;this.regeisteredCallbacks.forEach(function(c){c(a,b)})},initPasswordFieldLogging:function(a){this.passwordFieldID=a.passwordFieldID;this._updatePassword();a=b("ge")(this.passwordFieldID);if(a==null)return;a.addEventListener("input",this._mayLogPasswordPrefillViaDropdown.bind(this));window.addEventListener("load",this._mayLogPasswordPrefillOnload.bind(this))},updatePrefill:function(a,c,d){var e,f=(e=b("ge"))("prefill_source"),g=e("prefill_type"),h=e("first_prefill_source"),i=e("first_prefill_type"),j=e("had_cp_prefilled"),k=e("had_password_prefilled");e=e("prefill_contact_point");f!=null&&(f.value=c);g!=null&&(g.value=d);e!=null&&a!=null&&(e.value=a);i!=null&&(i.value==null||i.value=="")&&(i.value=d);h!=null&&(h.value==null||h.value=="")&&(h.value=c);j!=null&&(j.value==null||j.value==="false")&&d==="contact_point"&&(j.value="true");k!=null&&(k.value==null||k.value==="false")&&d==="password"&&(k.value="true")},_mayLogContactpointPrefillOnload:function(){this._updateContactpoint();if(this.previousContactpoint==null||this.previousContactpoint==="")return;var a=this.previousContactpoint===this.serverPrefillContactpoint?"server_prefill":"browser_onload";this._logBrowserPrefill(a,"contact_point");this._invokeCallbacks(a,"contact_point")},_mayLogPasswordPrefillOnload:function(){this._updatePassword();if(this.previousPassword==null||this.previousPassword==="")return;this._logBrowserPrefill("browser_onload","password");this._invokeCallbacks("browser_onload","password")},_mayLogContactpointPrefillViaDropdown:function(){var a=b("ge")(this.contactpointFieldID);if(a==null||a.value==null)return;if(this._isBrowserPrefill(this.previousContactpoint,a.value)===!1){this._updateContactpoint();return}this._updateContactpoint();this._logBrowserPrefill("browser_dropdown","contact_point");this._invokeCallbacks("browser_dropdown","contact_point")},_mayLogPasswordPrefillViaDropdown:function(){var a=b("ge")(this.passwordFieldID);if(a==null||a.value==null)return;if(this._isBrowserPrefill(this.previousPassword,a.value)===!1){this._updatePassword();return}this._updatePassword();this._logBrowserPrefill("browser_dropdown","password");this._invokeCallbacks("browser_dropdown","password")},_isBrowserPrefill:function(a,c){if(c==="")return!1;if(c===a)return!1;if(c.length===1||a.length===c.length+1||c.length===a.length+1)return!1;var d=b("DamerauLevenshtein").DamerauLevenshteinDistance(c,a);return d===a.length-c.length?!1:!0},_updateContactpoint:function(){var a=b("ge")(this.contactpointFieldID);this.previousContactpoint=a!=null&&a.value!=null?a.value:""},_updatePassword:function(){var a=b("ge")(this.passwordFieldID);this.previousPassword=a!=null&&a.value!=null?a.value:""},_logBrowserPrefill:function(a,c){var d=null;c==="contact_point"&&(d=this.previousContactpoint);a!=="server_prefill"&&this.updatePrefill(d,a,c);b("BanzaiLogger").create({signal:!0}).log("LoginEventsLoggerConfig",{event:"browser_autocomplete",prefill_source:a,prefill_type:c})}};e.exports=a}),null); __d("PlatformOAuthDialogLoginFunnelLogger",["FBLogger","URI","WebFunnelLogger"],(function(a,b,c,d,e,f){"use strict";var g,h={CLIENT_FUNNEL_VERSION:1,log:function(a,c,d,e,f){e===void 0&&(e=!0);if(null==d||""===d||e&&(null==c||""===c||0===c)){b("FBLogger")("platform_login_web_funnel_client_js").mustfix("\nerror: null_required_field\naction: "+a+"\nloggerId: "+String(d)+"\ncbt: "+String(c)+"\n ");return}e="number"!==typeof c?parseInt(c,10):c;c=Date.now()-e;var g=i(),l=j();d=new(b("WebFunnelLogger"))("PlatformLoginWebFunnelDefinition").setAction(a).setSessionKey(d).addActionPayload("logger_id",d).addActionPayload("first_paint_time",g).addActionPayload("response_start_time",l).addActionPayload("cbt_delta",c).addFunnelPayload("client_funnel_version",h.CLIENT_FUNNEL_VERSION).addFunnelPayload("cbt",e).addFunnelPayload("gdp_type",f);if(a==="client_logged_out_init_impression"){g=k();d.addFunnelPayload("login_uri",g)}d.logVital()}},i=function(){if(window.performance){var a=window.performance.getEntriesByType("paint").filter(function(a){return"first-paint"===a.name});if(null==a||0<!a.length)return null;a=a[0].startTime+a[0].duration;return a}return null},j=function(){if(window.performance){var a=window.performance.getEntriesByType("navigation");return null==a||0<!a.length?null:a[0].responseStart}return null},k=function(){return(g||(g=b("URI"))).getRequestURI().setQueryString("").toString()};e.exports=h}),null); __d("PlatformDialogCBTSetter",["PlatformOAuthDialogLoginFunnelLogger","URI","XOauthDialogController","uuid"],(function(a,b,c,d,e,f){"use strict";var g;a={setCBTInFieldAndLog:function(a,c,d,e){if(a.value===""){var f=Date.now();a.value=f.toString()}b("PlatformOAuthDialogLoginFunnelLogger").log(c,a.value,d,!0,e)},setCBTInFormAndLog:function(a,c){var d=new(g||(g=b("URI")))(a.action),e=d.getQueryData().next;if(!e)return;e=new g(e);var f=b("XOauthDialogController").getURIBuilder().getURI().getPath().toString();f.endsWith("/")&&(f=f.substr(0,f.length-1));if(!e.getPath().includes(f))return;f=e.getQueryData().cbt;var h=e.getQueryData().logger_id;f||(f=Date.now(),e.addQueryData("cbt",f),d.addQueryData("next",e.toString()),a.action=d.toString());h||(h=b("uuid")(),e.addQueryData("logger_id",h),d.addQueryData("next",e.toString()),a.action=d.toString());b("PlatformOAuthDialogLoginFunnelLogger").log(c,f,h)}};e.exports=a}),null);
