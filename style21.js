if (self.CavalryLogger) { CavalryLogger.start_js(["N\/NIN"]); } __d("MSiteUFICommentSimpleSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"client_subscription_id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"legacy_token",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MSiteUFICommentSimpleSubscription",selections:[{alias:null,args:b,concreteType:"CommentCreateResponsePayload",kind:"LinkedField",name:"comment_create_subscribe",plural:!1,selections:[c,d,{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"comment",plural:!1,selections:[e,{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"comment_parent",plural:!1,selections:[e],storageKey:null}],storageKey:null}],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MSiteUFICommentSimpleSubscription",selections:[{alias:null,args:b,concreteType:"CommentCreateResponsePayload",kind:"LinkedField",name:"comment_create_subscribe",plural:!1,selections:[c,d,{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"comment",plural:!1,selections:[e,{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"comment_parent",plural:!1,selections:[e,f],storageKey:null},f],storageKey:null}],storageKey:null}]},params:{id:"2560750474007271",metadata:{subscriptionName:"comment_create_subscribe"},name:"MSiteUFICommentSimpleSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null); __d("MSiteUFILikeSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"client_subscription_id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},g=[f],h={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},i={alias:null,args:[{kind:"Literal",name:"include_all",value:!0}],concreteType:"FeedbackReactorsPerReaction",kind:"LinkedField",name:"reactions_summary",plural:!0,selections:[{alias:null,args:null,concreteType:"PerReactionReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"display_count",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"FeedbackReaction",kind:"LinkedField",name:"feedback_reaction",plural:!1,selections:g,storageKey:null}],storageKey:"reactions_summary(include_all:true)"},j={alias:null,args:null,concreteType:"ReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[h],storageKey:null},k=[{kind:"Literal",name:"max_users_to_list",value:1}],l={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},o={alias:null,args:[{kind:"Literal",name:"site",value:"mobile"}],kind:"ScalarField",name:"url",storageKey:'url(site:"mobile")'};h={alias:null,args:null,concreteType:"AggregatedEntitiesAtRange",kind:"LinkedField",name:"aggregated_ranges",plural:!0,selections:[m,n,h],storageKey:null};var p=[l,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[m,n,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[o],storageKey:null}],storageKey:null},h],q={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};l=[l,{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[m,n,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[q,o,{kind:"InlineFragment",selections:[e],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:null},h];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MSiteUFILikeSubscription",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"feedback_like_subscribe",plural:!1,selections:[c,d,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[e,{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"viewer_feedback_reaction_info",plural:!1,selections:g,storageKey:null},i,j,{alias:null,args:k,concreteType:"TextWithEntities",kind:"LinkedField",name:"viewer_likes_reaction_sentence",plural:!1,selections:p,storageKey:"viewer_likes_reaction_sentence(max_users_to_list:1)"},{alias:null,args:k,concreteType:"TextWithEntities",kind:"LinkedField",name:"viewer_does_not_like_reaction_sentence",plural:!1,selections:p,storageKey:"viewer_does_not_like_reaction_sentence(max_users_to_list:1)"}],storageKey:null}],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MSiteUFILikeSubscription",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"feedback_like_subscribe",plural:!1,selections:[q,c,d,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[e,{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"viewer_feedback_reaction_info",plural:!1,selections:[f,e],storageKey:null},i,j,{alias:null,args:k,concreteType:"TextWithEntities",kind:"LinkedField",name:"viewer_likes_reaction_sentence",plural:!1,selections:l,storageKey:"viewer_likes_reaction_sentence(max_users_to_list:1)"},{alias:null,args:k,concreteType:"TextWithEntities",kind:"LinkedField",name:"viewer_does_not_like_reaction_sentence",plural:!1,selections:l,storageKey:"viewer_does_not_like_reaction_sentence(max_users_to_list:1)"}],storageKey:null}],storageKey:null}]},params:{id:"3417990371547911",metadata:{subscriptionName:"feedback_like_subscribe"},name:"MSiteUFILikeSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null); __d("UFICommentLikeSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"client_subscription_id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"does_viewer_like",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},g=[f],h={alias:null,args:null,concreteType:"LikersOfContentConnection",kind:"LinkedField",name:"likers",plural:!1,selections:g,storageKey:null};g={alias:null,args:null,concreteType:"ReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:g,storageKey:null};var i={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},j=[i];f={alias:null,args:null,concreteType:"FeedbackReactorsPerReaction",kind:"LinkedField",name:"reactions_summary",plural:!0,selections:[{alias:null,args:null,concreteType:"FeedbackReaction",kind:"LinkedField",name:"feedback_reaction",plural:!1,selections:j,storageKey:null},{alias:null,args:null,concreteType:"PerReactionReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[f,{alias:null,args:null,kind:"ScalarField",name:"display_count",storageKey:null}],storageKey:null}],storageKey:null};var k={alias:null,args:null,kind:"ScalarField",name:"reaction_count_reduced",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"legacy_comment_token",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"UFICommentLikeSubscription",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"comment_like_subscribe",plural:!1,selections:[c,d,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[e,h,g,f,k,{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"viewer_feedback_reaction_info",plural:!1,selections:j,storageKey:null},l],storageKey:null}],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"UFICommentLikeSubscription",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"comment_like_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c,d,{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[e,h,g,f,k,{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"viewer_feedback_reaction_info",plural:!1,selections:[i,m],storageKey:null},l,m],storageKey:null}],storageKey:null}]},params:{id:"2464812086949900",metadata:{subscriptionName:"comment_like_subscribe"},name:"UFICommentLikeSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null); __d("MLayerDestroyOnHide",[],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this.$1=a,this.$2}var b=a.prototype;b.enable=function(){this.$2=this.$1.addListener("hide",this.$1.destroy.bind(this.$1))};b.disable=function(){this.$1=null,this.$2.remove(),this.$2=null};return a}();e.exports=a}),null); __d("MUFIActorSelectorBootloader",["Bootloader","Event","MFlyout","MLayerDestroyOnHide","MLayerHideOnBlur","destroyOnUnload"],(function(a,b,c,d,e,f){"use strict";a={_buildLoadingFlyout:function(a,c){return new(b("MFlyout"))({position:"below",context:a,addedBehaviors:[b("MLayerDestroyOnHide"),b("MLayerHideOnBlur")],classNames:["accelerate"],margin:"none",nubalign:"center",offsetY:0,width:"100%"},c)},initBootloadHook:function(a){var c=this,d=b("Event").listen(a.container,"click",function(){var e=c._buildLoadingFlyout(a.loadingFlyoutContext,a.loadingFlyoutContent);e.show();b("Bootloader").loadModules(["MUFIActorSelector.react","ReactRenderer"],function(b,c){c.constructAndRenderComponentAcrossTransitions(b,a.reactElementProps,a.container),e.destroy(),d.remove()},"MUFIActorSelectorBootloader")});b("destroyOnUnload")(d.remove)}};e.exports=a}),null); __d("XAppGrowthCtaLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mobile/android/redirect/cta_logging/",{event:{type:"Enum",required:!0,enumType:1}})}),null); __d("MAppGrowthCtaLogging",["BanzaiLogger","Stratcom","WebFunnelLogger","XAppGrowthCtaLoggingController","XAsyncRequest","goURI"],(function(a,b,c,d,e,f){"use strict";a={init:function(a){b("Stratcom").listen("click",a,function(a){var c=a.getTarget().getAttribute("data-disabled");a.getTarget().setAttribute("data-disabled","1");var d=a.getTarget().getAttribute("href");if(c!="1"){c=a.getTarget().getAttribute("data-event");c=b("XAppGrowthCtaLoggingController").getURIBuilder().setEnum("event",c).getURI();var e=function(b){a.getTarget().setAttribute("data-disabled","")};new(b("XAsyncRequest"))(c).setMethod("POST").setHandler(e).send()}c=d.startsWith("#!")?d.substring(2):d;b("goURI")(c)})},logToPromoFunnelLogger:function(a,c,d,e,f){b("Stratcom").listen("click",a,function(a){var g=new(b("WebFunnelLogger"))("MSitePromosUpsellFunnelDefinition").setAction("clicked").setSessionKey(d).addFunnelPayload("upsell_id",c);f&&g.markStart();g.logWithEventTime(Date.now());b("BanzaiLogger").log("MsiteUpsellPromosRealTimeLoggerConfig",{event:"clicked",upsell:c,impression:d});e!==""&&b("goURI")(e);g=a.getTarget().getAttribute("href");a=g.startsWith("#!")?g.substring(2):g;b("goURI")(a)})}};e.exports=a}),null); __d("MCompositionStoreID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CONFIG:"CONFIG",FORMAT:"FORMAT",GROUP_SELL:"GROUP_SELL",MINUTIAE:"MINUTIAE",PHOTO:"PHOTO",PLACE:"PLACE",PAGE_RECOMMENDATIONS:"PAGE_RECOMMENDATIONS",SHARE:"SHARE",STATUS:"STATUS",WITH_TAGS:"WITH_TAGS",PRIVACY:"PRIVACY",SLIDESHOW:"SLIDESHOW"})}),null); __d("MComposition",["invariant","MCompositionStoreID"],(function(a,b,c,d,e,f,g){a=function(){"use strict";function a(a){a=a||{};this.$1={};for(var b in a)this.setStoreData(b,a[b])}var c=a.prototype;c.serialize=function(){return this.$1};c.$2=function(a){Object.prototype.hasOwnProperty.call(b("MCompositionStoreID"),a)||g(0,2905,a)};c.setStoreData=function(a,b){this.$2(a);Object.prototype.hasOwnProperty.call(this.$1,a)&&g(0,2906,a);this.$1[a]=b;return this};return a}();e.exports=a}),null); __d("MComposerPresence",["invariant","DOM","EventEmitter","MLegacyDataStore","$"],(function(a,b,c,d,e,f,g){var h="REGISTERED",i=null,j=new(b("EventEmitter"))();a={addRegistrationListener:function(a){return j.addListener(h,a)},hasRegisteredInstance:function(){return!!i},hasLoadedPrivacyValue:function(a){return!this.hasRegisteredInstance()?!1:b("DOM").scry(b("DOM").find(b("$")("static_templates"),"div","composer-main-view"),"tr","privacy-option").some(function(c){return b("MLegacyDataStore").get(c).value===a})},register:function(a){i&&g(0,5767),i=a,j.emit(h)},unregister:function(a){i===a||g(0,5768),i=null},cleanup:function(){i!==null&&i.cleanup()}};e.exports=a}),null); __d("MComposerAsyncLoadRequest",["Promise","MComposerPresence","MRequest"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(){this.$1=null,this.$2=null,this.$3=null}var c=a.prototype;c.$4=function(){this.$1&&(this.$1.remove(),this.$1=null),this.$3&&(this.$3.abort(),this.$3=null)};c.$5=function(a){var c=this;return new(b("Promise"))(function(d,e){c.$1=b("MComposerPresence").addRegistrationListener(d),c.$3=new(b("MRequest"))(a),c.$3.setAutoRetry(!1),c.$3.listen("fail",e),c.$3.send()})};c.send=function(a){var b=this;this.$2||(this.$2=this.$5(a),this.$2["finally"](function(){return b.$4()}));return this.$2};return a}();e.exports=a}),null); __d("XComposerAsyncLoaderController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/composer/async_loader/",{targetid:{type:"Int"},photo_url:{type:"String"},video_url:{type:"String"},attachment_id:{type:"String"}})}),null); __d("MComposerEntry",["Promise","ErrorUtils","LoadingIndicator","MComposerAsyncLoadRequest","MComposerPresence","MComposition","MLegacyDataStore","Stratcom","XComposerAsyncLoaderController"],(function(a,b,c,d,e,f){var g,h=new(b("Promise"))(function(a,b){return b()}),i=new(b("Promise"))(function(a){return a()}),j=(g||(g=b("ErrorUtils"))).guard(function(a){if(a)throw a},"MComposerEntry");function a(a){if(o)return;p.invoke(new(b("MComposition"))(b("MLegacyDataStore").get(a.getNode("composer_entry_trigger")).COMPOSITION))}function k(a,c,d,e,f){e===void 0&&(e=!0);o=!0;var g=null;b("MComposerPresence").hasRegisteredInstance()?g=n(a,d):g=m(a,c,e).then(function(){var b=!0;f&&(b=f());if(b)return n(a,d)},j);g["finally"](function(){return o=!1});return g}function l(a,c){return b("MComposerPresence").hasRegisteredInstance()?i:new(b("MComposerAsyncLoadRequest"))().send(c)}function m(a,c,d){d===void 0&&(d=!0);d&&b("LoadingIndicator").show();a=l(a,c);d&&a["finally"](function(){return b("LoadingIndicator").hide()});return a}function n(a,c){return new(b("Promise"))(function(d,e){var f={};f.COMPOSITION=a.serialize();f.ON_CANCEL=e;f.ON_SUBMIT=d;f.ON_OPEN=c;b("Stratcom").invoke("MComposer:entry:js",null,f)})}var o=!1;b("XComposerAsyncLoaderController").getURIBuilder().getURI();b("Stratcom").listen("click","composer_entry_trigger",a);b("Stratcom").listen("m:page:unload",null,function(){o=!1});var p={invoke:function(a,c,d,e,f){if(o||this.blockNavigateToComposer())return h;c=b("XComposerAsyncLoaderController").getURIBuilder().setInt("targetid",c);d!==void 0&&(c=c.setString("photo_url",d));e!==void 0&&(c=c.setString("video_url",e));f!==void 0&&(c=c.setString("attachment_id",f));return k(a||new(b("MComposition"))(),c.getURI())},invokeOcelot:function(a,c,d,e){if(o||this.blockNavigateToComposer())return h;var f=new(b("MComposition"))();return k(f,a,d,c,e)},blockNavigateToComposer:function(){return window.bgUploadInlineComposerCallback?window.bgUploadInlineComposerCallback():!1}};e.exports=p}),3); __d("MFeedErrorDetection",["Banzai","DataAttributeUtils"],(function(a,b,c,d,e,f){"use strict";var g={};function h(a,c,d,e){a={event:a,shouldLogDetail:c,site:"mtouch"};c&&(a.intValues=d,a.normalValues=e);b("Banzai").post("feed_error_detection",a,{delay:0})}a={registerFeedStory:function(a){var c=a.feedObjectElement;a=a.shouldLogDetail;if(!c)return;var d=b("DataAttributeUtils").getDataFt(c);c=c.getAttribute("data-dedupekey");if(!c||!d)return;if(g[c]){var e;a&&(e={dedupKey:c,ft_A:d,ft_B:g[c]});h("mtouch_duplicate_stories",a,{},{dup_field:e||{}})}else g[c]=d}};e.exports=a}),null); __d("XFeedNUXSaveSeenStateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/feed/nux/seen/save/",{link_id:{type:"String"},key:{type:"String",required:!0},seen:{type:"Bool",defaultValue:!1},env:{type:"Enum",enumType:0}})}),null); __d("MFeedNUXTooltip",["DOM","MRequest","MViewport","Stratcom","SubscriptionsHandler","XFeedNUXSaveSeenStateController","destroyOnUnload","mixInEventEmitter"],(function(a,b,c,d,e,f){var g={},h,i={},j,k=0,l=100,m=1,n=0;function o(){h=b("Stratcom").listen("scroll",null,q),b("destroyOnUnload")(p)}function p(){h&&h.remove(),h=null,window.clearTimeout(j),j=null}function q(){var a=b("MViewport").getHeight();j&&(window.clearTimeout(j),j=null);for(var c in g){var d=g[c],e=d.getNodes(),f=d.getHeadRoom();for(var h=0;h<e.length;h++){var i=e[h].getBoundingClientRect();if(i.top>=f&&i.bottom<=a){r(e[h],d);break}}}}function r(a,b){j=window.setTimeout(function(){b.getContext()!==a&&(b.setContext(a),b.show())},k)}a=function(){"use strict";function a(a,c,d,e){g.length||o();if(g[c]||i[c]){d.destroy();return}this.$1=c;this.$2=b("DOM").scry(document.getElementById("page"),"*",a);this.$3=a;this.$4=n;this.$5=d;this.$6=e===0?0:e||l;g[c]=this;var f=new(b("SubscriptionsHandler"))();f.addSubscriptions(this.$5.addListener("show",this.emit.bind(this,"show")),this.$5.addListener("hide",function(){this.emit("hide"),f.release()}.bind(this)));q()}var c=a.prototype;c.destroy=function(){delete g[this.$1],Object.keys(g).length||p()};c.getContext=function(){return this.$5.getContext()};c.getNodes=function(){return this.$2};c.getHeadRoom=function(){return this.$6};c.getIsUnseen=function(){return this.$4===n};c.setContext=function(a){this.$5&&this.$5.setContext(a)};c.show=function(){if(!this.$5||this.$4===m)return;i[this.$1]=!0;this.$4=m;this.$5.show();var a=b("XFeedNUXSaveSeenStateController").getURIBuilder().setString("key",this.$1).setBool("seen",!0);new(b("MRequest"))(a.getURI()).setMethod("POST").send();this.destroy()};c.hide=function(){this.$5&&this.$5.hide()};return a}();b("mixInEventEmitter")(a,{show:!0,hide:!0});e.exports=a}),null); __d("MFeedReactionsNUX",["BanzaiLogger","MLegacyDataStore","MLiveData","Stratcom","SubscriptionsHandler","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=c&&c.isCommentNUX;if(a){var e=new(b("SubscriptionsHandler"))();e.addSubscriptions(b("Stratcom").listen("click","like-reaction-flyout",function(c){var f=c.getNode("like-reaction-flyout"),h=c.getNode("feed-ufi-comments");if(!f||h)return;h=b("MLegacyDataStore").get(f);if(d&&!h.isComment||!d&&h.isComment)return;var i=h.feedback_target||h.feedbackTarget;if(i){var j=b("MLiveData").get(i);e.addSubscriptions(j.listen("change",function(){j.getData().has_viewer_liked&&b("requestAnimationFrame")(function(){a.setContext(c.getTarget()),a.show(),g(i)})}))}}),a.once("hide",function(){e.release()}));d||e.addSubscriptions(b("Stratcom").listen("click","reactions-bling-bar",function(c){var d=c.getNode("mufi-inline").querySelector('a[data-sigil*="like-reaction-flyout"]');if(d){var e=c.getNode("feed-ufi-metadata");e=b("MLegacyDataStore").get(e).feedback_target.toString();g(e);a.setContext(d);a.show();c.kill()}}));b("Stratcom").listen("m:page:unload",null,function(){b("Stratcom").removeCurrentListener(),e.release()})}}function g(a){b("BanzaiLogger").log("WebReactionsNuxLoggerConfig",{feedback_id:a,"interface":"mTouch"})}e.exports.init=a}),null); __d("CurrentLocale",["LocaleInitialData"],(function(a,b,c,d,e,f){a={};a.get=function(){return b("LocaleInitialData").locale};e.exports=a}),null); __d("areEqual",[],(function(a,b,c,d,e,f){var g=[],h=[];function a(a,b){var c=g.length?g.pop():[],d=h.length?h.pop():[];a=i(a,b,c,d);c.length=0;d.length=0;g.push(c);h.push(d);return a}function i(a,b,c,d){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return!1;if(typeof a!=="object"||typeof b!=="object")return!1;var e=Object.prototype.toString,f=e.call(a);if(f!=e.call(b))return!1;switch(f){case"[object String]":return a==String(b);case"[object Number]":return isNaN(a)||isNaN(b)?!1:a==Number(b);case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}e=c.length;while(e--)if(c[e]==a)return d[e]==b;c.push(a);d.push(b);e=0;if(f==="[object Array]"){e=a.length;if(e!==b.length)return!1;while(e--)if(!i(a[e],b[e],c,d))return!1}else if(a instanceof Set){if(a.size!==b.size)return!1;f=Array.from(b.values());for(var e=a,g=Array.isArray(e),h=0,e=g?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(g){if(h>=e.length)break;j=e[h++]}else{h=e.next();if(h.done)break;j=h.value}j=j;var k=!1;for(var l=0;l<f.length;l++){var m=f[l];if(i(j,m,c,d)){k=!0;f.splice(l,1);break}}if(k===!1)return!1}return!0}else{if(a.constructor!==b.constructor)return!1;if(Object.prototype.hasOwnProperty.call(a,"valueOf")&&Object.prototype.hasOwnProperty.call(b,"valueOf"))return a.valueOf()==b.valueOf();m=Object.keys(a);if(m.length!=Object.keys(b).length)return!1;for(var j=0;j<m.length;j++){if(m[j]==="_owner")continue;if(!Object.prototype.hasOwnProperty.call(b,m[j])||!i(a[m[j]],b[m[j]],c,d))return!1}}c.pop();d.pop();return!0}e.exports=a}),null); __d("BaseGraphQLSubscription",["regeneratorRuntime","CurrentLocale","CurrentUser","GQLSHeartbeatConfig","Random","RelayRTIUtils","SkywalkerManager","gkx","nullthrows","relay-runtime","uuid"],(function(a,b,c,d,e,f){var g=b("GQLSHeartbeatConfig").heartbeat_interval,h=b("RelayRTIUtils").computeRoutingHint,i=b("RelayRTIUtils").extractUseCaseFromTopic,j=b("RelayRTIUtils").logSubscriptionEvent,k=b("relay-runtime").getRequest,l=100,m=1e3,n=100,o="gqls_default_logging",p="gqls_workplace_logging";function q(a){if(b("gkx")("676906")&&b("Random").coinflip(l))return o;if(b("gkx")("1383502")&&b("Random").coinflip(n))return p;if(b("gkx")("1388683")||b("gkx")("1382775")&&b("Random").coinflip(m))return o}a=function(){"use strict";function a(){}var c=a.prototype;c.getTopic=function(a){throw new Error("getTopic() unimplemented by subclass of BaseGraphQLSubscription")};c.getQuery=function(){throw new Error("getQuery() or getQueryID() unimplemented by subclass of BaseGraphQLSubscription")};c.getQueryParameters=function(a){throw new Error("getQueryParameters() unimplemented by subclass of BaseGraphQLSubscription")};c.getSubscriptionName=function(){var a=k(this.getQuery());return String(b("nullthrows")(a.params.metadata.subscriptionName))};a.subscribe=function(a,b,c){c===void 0&&(c={});return new this().subscribe(a,b,c)};c.subscribe=function(a,c,d){d===void 0&&(d={});var e=this.getTopic(a);a=this.getQueryParameters(a);var f=s(e,b("nullthrows")(k(this.getQuery()).params.id),a,c,d);return{getContext:function(){return f.getContext()},unsubscribe:function(){f.unsubscribe()}}};return a}();a.getTransformContextForBaseGraphQLSubscription_INTERNAL=r;a.subscribeWithSkywalker_INTERNAL=s;function r(a,c,d){var e="0";return{viewerID:(d=d)!=null?d:b("CurrentUser").getID(),appID:e,locale:b("CurrentLocale").get(),queryID:a,serializedQueryParameters:JSON.stringify(c),useOSSResponseFormat:!1}}function s(a,c,d,e,f){f===void 0&&(f={});var k=b("nullthrows")(i(a)),l=b("SkywalkerManager").getSubscriptionType(a),m=b("uuid")(),n=babelHelpers["extends"]({},d,{input:babelHelpers["extends"]({},d.input,{client_subscription_id:m})}),o=(d=f.forceLogContext)!=null?d:q(a);o!=null&&(n=babelHelpers["extends"]({},n,{"%options":{client_logged_context:o}}));f.receiveLifecycleEvents&&(n=babelHelpers["extends"]({},n,{"%options":babelHelpers["extends"]({},n["%options"],{heartbeat:{interval:g}})}));n=babelHelpers["extends"]({},n,{"%options":{client_has_ods_usecase_counters:!0}});d={};d.transformContext=JSON.stringify(r(c,n,f.viewerID));f.policy!=null&&(d.policy=f.policy);f.customOptions!=null&&(d.customOptions=JSON.stringify(f.customOptions));f=null;if(m!=null){var p;f=babelHelpers["extends"]({},(p=f)!=null?p:{},{requestId:m})}p=h(k,n.input);if(p!=null){var s;f=babelHelpers["extends"]({},(s=f)!=null?s:{},{routing_hint:p})}j("client_subscribe",k,n,o,l,c);s=babelHelpers["extends"]({context:d,onUnsubscribeEager:function(){j("client_unsubscribe",k,n,o,l,c)},gqlsLifecycleHandler:function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:e({__type:"lifecycle_event",state:a});case 1:case"end":return b.stop()}},null,this)}},f?{headers:f}:{});p=null;o!=null&&(p={requestId:m,forceLogContext:o});p!=null&&(s=babelHelpers["extends"]({},s,{instrumentationData:p}));return b("SkywalkerManager").subscribe(a,function(a){j("receivepayload",k,n,o,l,c),e(babelHelpers["extends"]({__type:"data"},JSON.parse(a.payload)))},s)}e.exports=a}),null); __d("MSiteUFICommentSimpleSubscription",["BaseGraphQLSubscription","relay-runtime","MSiteUFICommentSimpleSubscription.graphql"],(function(a,b,c,d,e,f){var g;b("relay-runtime").graphql;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getTopic=function(a){return"gqls/"+this.getSubscriptionName()+"/feedback_id_"+a};d.getQuery=function(){return g!==void 0?g:g=b("MSiteUFICommentSimpleSubscription.graphql")};d.getQueryParameters=function(a){return{input:{feedback_id:a}}};return c}(b("BaseGraphQLSubscription"));e.exports=a}),null); __d("MSiteUFILikeSubscription",["BaseGraphQLSubscription","relay-runtime","MSiteUFILikeSubscription.graphql"],(function(a,b,c,d,e,f){var g;b("relay-runtime").graphql;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getTopic=function(a){return"gqls/"+this.getSubscriptionName()+"/feedback_id_"+a};d.getQuery=function(){return g!==void 0?g:g=b("MSiteUFILikeSubscription.graphql")};d.getQueryParameters=function(a){return{input:{feedback_id:a}}};return c}(b("BaseGraphQLSubscription"));e.exports=a}),null); __d("UFICommentLikeSubscription",["BaseGraphQLSubscription","relay-runtime","UFICommentLikeSubscription.graphql"],(function(a,b,c,d,e,f){var g;b("relay-runtime").graphql;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getTopic=function(a){return"gqls/"+this.getSubscriptionName()+"/top_level_feedback_id_"+a};d.getQuery=function(){return g!==void 0?g:g=b("UFICommentLikeSubscription.graphql")};d.getQueryParameters=function(a){return{input:{top_level_feedback_id:a}}};return c}(b("BaseGraphQLSubscription"));e.exports=a}),null); __d("MLtgTranslationPreferencesBootloader",["Bootloader","EventListener"],(function(a,b,c,d,e,f){var g;d={bootloadDropdown:function(d,e,f,h,i){b("EventListener").listen(d,"click",function(){b("Bootloader").loadModules(["React","ReactDOM","DOMContainer.react","MLtgTranslationPreferences.react"],function(b,j,k,l){a=b,c=j,g||c.render(a.jsx(l,{translationData:f,originalMessageElem:h,showDropdown:!0,mLanguageSettingsURI:i,children:a.jsx(k,{children:e})}),d)},"MLtgTranslationPreferencesBootloader")})}};e.exports=d}),null); __d("MSnowflakeLink",["DataAttributeUtils","DOM","MLinkHack","MModalDialog","Stratcom","URI","destroyOnUnload"],(function(a,b,c,d,e,f){var g;a=function(){"use strict";function a(a){var c=this;this.$1=!1;this.$2=a.node;this.$3=a.permalink;this.$4=a.setToken;this.$5=a.targetPhoto;this.$6=b("DOM").listen(a.node,"click",null,this.onClick.bind(this));b("destroyOnUnload")(function(){return c.$6.remove()});this.$7()}var c=a.prototype;c.getFeedTrackingOwnerID=function(){var a=b("DataAttributeUtils").getClickTrackingParent(this.$2);return a&&a.id};c.getPermalinkURI=function(){return new(g||(g=b("URI")))(this.$3).addQueryData("photo_id",this.$5)};c.getModalDialogURI=function(){return new(g||(g=b("URI")))(this.$2.getAttribute("href")).addQueryData("cached_data",this.$1).addQueryData("ftid",this.getFeedTrackingOwnerID())};c.onClick=function(a){b("MLinkHack").remove(this.$2),b("MModalDialog").openWithPermalinkURI(this.getModalDialogURI().toString(),this.getPermalinkURI()),a.prevent()};c.$7=function(){var a=this;if(!this.$4){this.$1=!0;return}var c=b("Stratcom").listen("m:photosetstore:update",null,function(b){b=(b.getData()||{}).set_token;if(!c||b!=a.$4)return;a.$1=!0;c.remove();c=null});b("destroyOnUnload")(function(){return c&&c.remove()})};return a}();e.exports=a}),null); __d("MReactionsBlingBar",["cx","fbt","MLiveData","MViewport","Stratcom","SubscriptionsHandler","UFIReactionIcons","UFIReactionTypes","URI","createIxElement","joinClasses","qex"],(function(a,b,c,d,e,f,g,h){var i,j=b("UFIReactionTypes").ordering.reduce(function(a,b,c){a[b]=c;return a},{}),k=function(){"use strict";function a(a){var c=a.elements;this.container=c.container;this.isPermalink=a.isPermalink;this.requestID=a.requestID;this.separateCommentsLink=a.separateCommentsLink;this.uri=new(i||(i=b("URI")))(a.uri);this.shouldAnchor=a.shouldAnchor;this.feedbackTarget=b("MLiveData").get(a.feedbackTargetID);this.isDarkMode=a.isDarkMode;this.darkModeLinks=a.darkModeLinks;this.subscriptions=new(b("SubscriptionsHandler"))();this.subscriptions.addSubscriptions(b("Stratcom").listen("m:page:unload",null,this.onUnload.bind(this)),this.feedbackTarget.listen("change",this.onChange.bind(this)));this.isPermalink&&this.shouldAnchor&&(a.isPageletified?this.anchorOnPageLoad():(this.pageLoadListener=b("Stratcom").listen(["m:page:render:complete"],null,this.anchorOnPageLoad.bind(this)),this.subscriptions.addSubscriptions(this.pageLoadListener)))}var c=a.prototype;c.onChange=function(){var a=this.feedbackTarget.getData(),c=a.reactioncountmap,d=a.reactiondisplaystrategy,e=a.request_id;d=d==="use_reaction_sheet_string_only"||d==="hide_counts";if(e===this.requestID||!c)return;e=b("UFIReactionTypes").ordering.filter(function(a){a=c[a];return a&&a["default"]>0}).sort(function(a,b){var d=c[a]["default"],e=c[b]["default"];return d===e?j[a]-j[b]:e-d}).slice(0,3).map(function(a,c){var d=document.createElement("div");d.className=b("joinClasses")("_1g05","_77lc");d.style.zIndex=3-c;d.appendChild(b("createIxElement")(b("UFIReactionIcons")[a][16]));return d});e=e.reduce(function(a,b){a.appendChild(b);return a},document.createElement("span"));e.className="_qfz";var f=document.createElement("div");f.className="_1w1k"+(d?" _8l2a":"");if(this.separateCommentsLink){var g=document.createElement("a");this.uri.addQueryData("anchor_composer","false");g.href=this.uri;g.appendChild(e);f.appendChild(g)}else f.appendChild(e);g=a.comment_count;e=a.share_count;var i=a.reactionsentences.current&&a.reactionsentences.current.text,k=document.createElement("div");k.className="_1g06";k.setAttribute("aria-label",h._("{count} reacted",[h._param("count",i)]));k.textContent=i;if(this.isDarkMode){var l=document.createElement("a");l.href=this.darkModeLinks.likesLink;l.className="_8gqh";l.appendChild(k);f.appendChild(l)}else f.appendChild(k);l=this.container;k=document.createElement("div");k.className="_1fnt"+(d?" _8l2b":"");if(this.isDarkMode){d=document.createElement("a");d.className="_8gqh _1fnt";d.href=this.darkModeLinks.commentsLink;k=k.appendChild(d)}if(!this.isPermalink){if(g>0){d=document.createElement("span");d.className="_1j-c"+(this.separateCommentsLink?" _6hyu":"");d.textContent=g===1?h._("1 comment"):h._("{count} comments",[h._param("count",a.reduced_comment_count)]);if(this.separateCommentsLink){var m=document.createElement("a");this.uri.addQueryData("anchor_composer","true");m.href=this.uri;m.appendChild(d);k.appendChild(m)}else k.appendChild(d)}if(e>0){m=document.createElement("span");m.className="_1j-c";m.textContent=e===1?h._("1 share"):h._("{count} shares",[h._param("count",a.reduced_share_count)]);k.appendChild(m)}}while(l.hasChildNodes())l.removeChild(l.firstChild);if(i||g||e){d=document.createDocumentFragment();d.appendChild(f);d.appendChild(k);l.appendChild(d)}};c.onUnload=function(){this.subscriptions.release(),this.subscriptions=null};c.anchorOnPageLoad=function(){b("MViewport").scrollToNode(this.container)};return a}();e.exports={init:function(a){new k(a)}}}),null); __d("MUFIReactionsUtils",["BackgroundSyncParameters","DateConsts","UFIReactionsUtils"],(function(a,b,c,d,e,f){var g=[null,null],h=1,i=0;a={getReactionData:function(a,c){var d=a.viewerreaction||a.has_viewer_liked?h:i,e=a.like_count,f=a.like_counts||g,j=a.like_friend_sentences||g,k=a.like_sentences||g;d&&!c?e--:!d&&c&&e++;var l=a.reduced_like_count;isNaN(l)||(l=e.toString());(d&&!c||!d&&c)&&(f=[f[1],f[0]],j=[j[1],j[0]],k=[k[1],k[0]]);return Object.assign({has_viewer_liked:!!c,like_count:e,like_counts:f,like_friend_sentences:j,like_sentences:k,reduced_like_count:l},b("UFIReactionsUtils").getReactionData(a,c,a.actor_for_post))},getReactionDataForComment:function(a,b){var c=a.reactioncount,d=a.reactioncountreduced;a.viewerreaction&&!b?c--:!a.viewerreaction&&b&&c++;c=Math.max(c,0);d&&!isNaN(d)&&(d=c.toString());a=this.getReactionData(a,b);return{has_viewer_liked:a.has_viewer_liked,like_count:a.like_count,reactioncount:c,reactioncountmap:a.reactioncountmap,reactioncountreduced:d,viewerreaction:a.viewerreaction}},getConfigForBackgroundRetry:function(a){return!navigator.serviceWorker||!navigator.serviceWorker.controller?void 0:b("BackgroundSyncParameters").shouldRecoverReactions?{requestId:"react_"+a,ttl:2*b("DateConsts").SEC_PER_HOUR,maxRetry:1}:void 0}};e.exports=a}),null); __d("MUFIRequest",["ChannelClientID","ClientIDs","MLiveData","MRequest","MURI","Stratcom"],(function(a,b,c,d,e,f){var g=b("MURI").getHashPrefixRegex(),h={};function a(a){a=new(b("MURI"))(a);var c=a.getFragment();g.test(c)&&(a=new(b("MURI"))(c.replace(g,"/")));return a.setProtocol(null).setDomain(null).setFragment(null)}function c(a,c,d,e,f){c&&(c.request_id=null,b("MLiveData").update(a,c));h[a]&&h[a].abort();d.addQueryData("client_id",b("ClientIDs").getNewClientID());d.addQueryData("session_id",b("ChannelClientID").getID());c=new(b("MRequest"))(d.toString());c.listen("finally",function(){h[a]=null});c.listen("postprocess",function(){b("Stratcom").invoke("m:ajax:complete")});c.setAutoRetry(!0);f&&c.setBackgroundRetry(f);e&&c.setData(e);h[a]=c;c.send()}e.exports={getURI:a,send:c}}),null); __d("XUFIReactionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/reaction/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},is_inline:{type:"Bool",defaultValue:!1},is_comment:{type:"Bool",defaultValue:!1},is_permalink:{type:"Bool",defaultValue:!1},action_source:{type:"String"},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},is_sponsored:{type:"Bool",defaultValue:!1},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:!1},bgsync_id:{type:"String"},aftercursor:{type:"String"},tab:{type:"String"},_ft_:{type:"String"}})}),null); __d("MReactionsFlyout",["cx","fbt","ActorURI","BanzaiLogger","CancelableEventListener","CSS","DOM","MBlockingTouchable","MLegacyDataStore","MLiveData","MParent","MUFIConfig","MUFIReactionsUtils","MUFIRequest","Stratcom","SubscriptionsHandler","TouchEventType","URI","XUFIReactionController","clearTimeout","gkx","qex","setTimeout"],(function(a,b,c,d,e,f,g,h){var i,j=[1,2,4,3,7,8],k=17,l="_ft_",m={top:.3,bottom:.6},n,o=[],p=function(){"use strict";function a(a){var c=this,d;this.autoHideOnScroll=function(a){a=c.flyout;if(!a||!a.isShown()){b("Stratcom").removeCurrentListener();return}var d;window.innerHeight?d=window.innerHeight:document.body&&(d=document.body.clientHeight);if(!d)return;var e=a.getContext().getBoundingClientRect().top,f=d*m.top,g=d*m.bottom;(e<f||e>g)&&a.hide()};this.onUnload=function(){c.onHide(),c.pageSubscriptions.release()};this.onClick=function(a){a=a.getNode("reaction-item");a instanceof HTMLElement&&c.select(a)};this.onScreenReaderTrigger=function(a){a=a.getTarget();if(!a)return;a=a.previousSibling;if(!a)return;c.flyout.setContext(a);c.setSupported();c.flyout.show();c.flyoutSubscriptions.addSubscriptions(b("Stratcom").listen("click","reaction-item",c.onClick));a=b("MLiveData").get(b("MLegacyDataStore").get(c.flyout.getContext()).feedbackTarget).getData();a=a.viewerreaction;var d=null;for(var e=0,f=c.reactionElements.length;e<f;e++){var g=b("MLegacyDataStore").get(c.reactionElements[e]);g=g.reaction;g===a&&(d=c.reactionElements[e])}d||(d=c.reactionElements[0]);d.focus()};this.onClickTrigger=function(a){a=a.getTarget();if(!(a instanceof HTMLElement))return;var d=c.flyout;if(d.isShown()){d.hide();return}b("Stratcom").hasSigil(a,"like-reaction-flyout")||(a=b("MParent").bySigil(a,"like-reaction-flyout"));a&&c.setupFlyout(d,a)};this.onClickCapture=function(a){var d=c.flyout;if(d){var e=b("MLegacyDataStore").get(d.getContext());e=e.kaiOSReactions;if(e&&d.isShown()){d.hide();return}}a.stop()};this.onTouchStart=function(a){var d=c.flyout;if(!d.isShown()){var e=document;e=e.body;e&&b("CSS").addClass(e,"_70ol");c.touchStartX=a.getTouch().clientX;c.timing.touchStartTime=Date.now();c.preventScrollTimeout=b("setTimeout")(function(){c.canScroll=!1},200);c.longpressTimeout=b("setTimeout")(function(){c.timing.shownTime=Date.now();var e=a.getTarget();if(!(e instanceof HTMLElement))return;b("Stratcom").hasSigil(e,"like-reaction-flyout")||(e=b("MParent").bySigil(e,"like-reaction-flyout"));e&&c.setupFlyout(d,e)},300)}};this.onTouchMove=function(a){var d=c.flyout,e=d.getContext()&&b("MLegacyDataStore").get(d.getContext()).isComment;c.canScroll||(e?a.kill():a.prevent());if(!d.isShown())return;a=a.getTouch();var f=a.clientX;a=a.clientY;a=document.elementFromPoint(f,a);if(a){var g=a.nodeName==="I"||a.nodeName==="IMG";if(!(g||c.canScrub)){c.canScrub=Math.abs(c.touchStartX-f)>=25;return}d.getContentRoot().setAttribute("data-longpress",!0);if(d.getContentRoot().contains(a)){if(g){a=(f=a)!=null?(f=f.parentNode)!=null?f.parentNode:f:f}c.active!==a&&b("MLegacyDataStore").get(a).reaction&&(c.isUpdatedDock||e?c.showOverlay(c.overlay&&c.overlay.slide):c.showOverlay(c.overlay&&c.overlay.dots),c.removeActive(),c.active=a,a&&a.setAttribute("data-active","true"))}else(!c.overlay||!c.overlay.container.contains(a))&&(c.removeActive(),c.showOverlay(c.overlay&&c.overlay.release))}};this.onTouchEnd=function(a){var d=c.active;if(d)c.log({finalReaction:b("MLegacyDataStore").get(d).reaction,viaScrubbing:!0}),c.select(d);else{d=a.getTouch();a=d.clientX;d=d.clientY;a=document.elementFromPoint(a,d);d=c.flyout;a&&!(d.getContentRoot().contains(a)||d.getContext().contains(a)||c.overlay&&c.overlay.container.contains(a))&&d.hide()}};this.onWindowClick=function(a){var d;a=a.getNode("reaction-item");a&&(d=b("MLegacyDataStore").get(a).reaction);c.log({finalReaction:d,viaScrubbing:!1})};this.onWindowTouchEnd=function(){var a=c.flyout;a.isShown()?(c.timing.touchEndTime=Date.now(),a.getContentRoot().removeAttribute("data-longpress")):(c.canScroll=!0,b("clearTimeout")(c.longpressTimeout),b("clearTimeout")(c.preventScrollTimeout))};this.onHide=function(){var a=document;a=a.body;a&&b("CSS").addClass(a,"_70ol");c.canScroll=!0;c.canScrub=!1;c.removeActive();c.removeUFIOverlay();c.flyout.hide();c.flyoutSubscriptions.release();c.flyoutSubscriptions=new(b("SubscriptionsHandler"))()};this.onWindowTouchMove=function(){c.flyout.isShown()||(c.canScroll=!0,b("clearTimeout")(c.longpressTimeout),b("clearTimeout")(c.preventScrollTimeout))};this.flyout=a;this.active=null;this.canScroll=!0;this.canScrub=!1;this.preventScrollTimeout=null;this.longpressTimeout=null;this.nuxTooltip=null;this.overlay=null;this.timing={touchStartTime:null,touchEndTime:null,shownTime:null};this.touchStartX=0;this.isUpdatedDock=b("MUFIConfig").hasUpdatedDock;this.pageSubscriptions=new(b("SubscriptionsHandler"))();this.flyoutSubscriptions=new(b("SubscriptionsHandler"))();this.assignFlyoutContent();this.pageSubscriptions.addSubscriptions(a.addListener("hide",this.onHide),(d=b("Stratcom")).listen("m:page:unload",null,this.onUnload),d.listen("m:viewport:orientation-change",null,this.onHide),d.listen(b("TouchEventType").END,null,this.onWindowTouchEnd),d.listen("click","screenreader-reactions-trigger",this.onScreenReaderTrigger),b("CancelableEventListener").listen(a.getContentRoot(),"touchmove","reaction-item",this.onTouchMove));o.forEach(function(a){return c.addAnchor(a)});n&&this.setNUXTooltip(n);b("MUFIConfig").hasIEMobileFixes?this.pageSubscriptions.addSubscriptions(b("Stratcom").listen("touchcancel",null,this.onWindowTouchEnd)):this.pageSubscriptions.addSubscriptions(b("Stratcom").listen("touchmove",null,this.onWindowTouchMove))}var c=a.prototype;c.addAnchor=function(a){var c=b("Stratcom").hasSigil(a,"kaios-like-react-trigger");c?this.pageSubscriptions.addSubscriptions(b("CancelableEventListener").listen(a,"click",null,this.onClickTrigger)):this.pageSubscriptions.addSubscriptions(b("CancelableEventListener").listen(a,b("TouchEventType").START,null,this.onTouchStart));b("MUFIConfig").hasIEMobileFixes||this.pageSubscriptions.addSubscriptions(b("CancelableEventListener").listen(a,"touchmove","like-reaction-flyout",this.onTouchMove),b("CancelableEventListener").listen(a,"touchmove","reaction-item",this.onTouchMove))};c.assignFlyoutContent=function(){(!this.reactionElements||this.reactionElements.length===0)&&(this.reactionElements=document.getElementsByClassName("_1-kd"),Array.prototype.forEach.call(this.reactionElements,function(a){return b("MBlockingTouchable").init(a)}))};c.setupFlyout=function(a,c){var d=b("MLegacyDataStore").get(c);a.setContext(c);this.setSupported();c=this.nuxTooltip;c&&c.hide();c=a.getContentRoot();c=b("MParent").bySigil(c,"m-layer-root");c&&(this.isUpdatedDock&&!d.isComment&&(this.applyMultilineFlyout(),b("CSS").addClass(c,"_5xt_")),d.isComment&&b("CSS").addClass(c,"_31rl"));a.show();c=b("MLegacyDataStore").get(a.getContext());a=c.kaiOSReactions;a||this.createUFIOverlay();this.isUpdatedDock||d.isComment?this.showOverlay(this.overlay&&this.overlay.tap):this.showOverlay(this.overlay&&this.overlay.dots);this.flyoutSubscriptions.addSubscriptions(b("Stratcom").listen("click","reaction-item",this.onClick),b("Stratcom").listenCapture("click","like-reaction-flyout",this.onClickCapture),b("Stratcom").listenCapture("click",null,this.onWindowClick));a&&this.flyoutSubscriptions.addSubscriptions(b("Stratcom").listen("scroll",null,this.autoHideOnScroll));b("MUFIConfig").hasIEMobileFixes||this.flyoutSubscriptions.addSubscriptions(b("Stratcom").listen("touchend","like-reaction-flyout",this.onTouchEnd),b("Stratcom").listen("touchend","reaction-item",this.onTouchEnd))};c.select=function(a){var c=this.flyout;c.hide();if(!a)return;a=b("MLegacyDataStore").get(a);a=a.reaction;c=c.getContext();var d=b("MLegacyDataStore").get(c),e=d.feedbackTarget;d=d.isComment;var f=b("MLiveData").get(e).getData();if(f.viewerreaction===a)return;if(d){d=c.getAttribute("data-uri")||c.getAttribute("href");d=b("MUFIRequest").getURI(d);d.addQueryData("reaction_comment_id",e.split("_")[1]);d.addQueryData("viewer_reaction",a);b("MUFIRequest").send(e,b("MUFIReactionsUtils").getReactionDataForComment(f,a),d)}else{d=f.actor_for_post;d!==0&&!d&&(d=null);var g=b("MParent").bySigil(c,"story-div"),h=null;if(g){g=b("MLegacyDataStore").get(g).linkdata;if(g&&b("gkx")("816008")){var j;h=(j={},j[l]=g,j)}}j=Object.assign({},(g={},g[b("ActorURI").PARAMETER_ACTOR]=d,g.ft_ent_identifier=e,g.reaction_type=a,g.feedback_source=new(i||(i=b("URI")))(c.getAttribute("data-uri")).getQueryData().feedback_source,g),h);b("MUFIRequest").send(e,b("MUFIReactionsUtils").getReactionData(f,a),b("XUFIReactionController").getURIBuilder().getURI(),j,b("MUFIReactionsUtils").getConfigForBackgroundRetry(e))}};c.removeActive=function(){var a=this.active;if(a){this.active=null;a.removeAttribute("data-active");a=a.parentElement;a&&a.classList.remove("mReactionInAnimation")}};c.applyMultilineFlyout=function(){var a=this.flyout,c=a.getContext();c=b("MParent").bySigil(c,"mufi-inline");a=a.getContentRoot();c=b("DOM").scry(c,"div","reactions-bling-bar");if(c.length==0){b("CSS").addClass(a,"_5xu1");return}c=c[0].getBoundingClientRect().height;c>k?b("CSS").addClass(a,"_5xu0"):c<k?b("CSS").addClass(a,"_5xu1"):(b("CSS").removeClass(a,"_5xu0"),b("CSS").removeClass(a,"_5xu1"))};c.showOverlay=function(a){var c=this.overlay;if(c&&a){b("CSS").show(a);for(var d in c){var e=c[d];e!=a&&e!=c.container&&b("CSS").hide(e)}}};c.log=function(a){var c=b("MLiveData").get(b("MLegacyDataStore").get(this.flyout.getContext()).feedbackTarget).getData(),d=c.ft_ent_identifier;c=c.viewerreaction;var e=this.timing,f=e.touchEndTime,g=e.touchStartTime;e=e.shownTime;if(!f||!g||!e)return;f=f-g;b("BanzaiLogger").log("UserReactionsLoggerConfig",{feedback_id:d,final_reaction:a.finalReaction||c,initial_reaction:c,"interface":"mTouch",long_press_duration:f>0?f:0,time_spent:Date.now()-e,via_scrubbing:a.viaScrubbing})};c.createUFIOverlay=function(){var a=this.flyout.getContext(),c=b("MLegacyDataStore").get(a),d=c.feedbackTarget;c=c.isComment;d=(d=b("MLiveData").get(d).getData().supportedreactions)!=null?d:this.getSupportedReactions();var e=document.createElement("div");e.style.display="none";e.className="_403o";d=Math.round(d.length*1.3);for(var f=0;f<d;++f){var g=document.createElement("div");g.className="_403p";e.appendChild(g).className="_403p"}g=document.createElement("div");g.style.display="none";g.className="_5xu2";g.textContent=h._("Tap to choose your reaction").toString();f=document.createElement("div");f.style.display="none";f.className="_5xu2";f.textContent=h._("Slide finger across").toString();d=document.createElement("div");d.style.display="none";d.className="_5xu2";d.textContent=h._("Release to cancel").toString();var i=document.createElement("div");i.className="_403n";c&&b("CSS").addClass(i,"_31ru");i.appendChild(e);i.appendChild(d);(this.isUpdatedDock||c)&&(i.appendChild(g),i.appendChild(f));c=b("MParent").bySigil(a,"ufi-inline-actions");c||(c=b("MParent").bySigil(a,"ufi-inline-comment-actions"));c?(c.insertBefore(i,c.firstChild),this.overlay={container:i,tap:g,slide:f,release:d,dots:e}):this.overlay=null};c.removeUFIOverlay=function(){var a=this.overlay;if(a){a=a.container;a.parentNode&&a.parentNode.removeChild(a);this.overlay=null}};c.getSupportedReactions=function(){var a;a=(a=b("qex")._("1394041"))!=null?a:!1;if(a){a=16;return[].concat(j,[a])}else return j};c.setSupported=function(){var a=b("MLegacyDataStore").get(this.flyout.getContext());a=(a=b("MLiveData").get(a.feedbackTarget).getData().supportedreactions)!=null?a:this.getSupportedReactions();var c=this.reactionElements;for(var d=0,e=c.length;d<e;++d){var f=c[d],g=b("MLegacyDataStore").get(f);g=g.reaction;b("CSS").conditionShow(f,a.indexOf(g)>=0)}};c.setNUXTooltip=function(a){this.nuxTooltip=a};return a}(),q;e.exports={init:function(a){q=new p(a)},addAnchor:function(a){if(q){q.addAnchor(a);return}o.push(a)},initNUX:function(a){n=a,q&&q.setNUXTooltip(a)}}}),null); __d("SaveState",[],(function(a,b,c,d,e,f){a={SAVING:"saving",SAVED:"saved",UNSAVING:"unsaving",UNSAVED:"unsaved"};e.exports=a}),null); __d("SaveStateHandler",["SaveState"],(function(a,b,c,d,e,f){var g=null;a=function(){"use strict";function a(){this.$1={},this.$2={}}var c=a.prototype;c.addListener=function(a,b){this.$1[a]||(this.$1[a]=[]),this.$1[a].push(b)};c.setState=function(a,b){a.forEach(function(a){this.$2[a]=b;if(!this.$1[a])return;a=this.$1[a];a.forEach(function(a){try{a.call(window,b)}catch(a){}})},this)};c.getState=function(a){return this.$2[a]};a.$3=function(){g||(g=new a());return g};a.listen=function(a,b){this.$3().addListener(a,b)};a.getState=function(a){return this.$3().getState(a)};a.saving=function(a){this.$3().setState(a,b("SaveState").SAVING)};a.saved=function(a){this.$3().setState(a,b("SaveState").SAVED)};a.unsaving=function(a){this.$3().setState(a,b("SaveState").UNSAVING)};a.unsaved=function(a){this.$3().setState(a,b("SaveState").UNSAVED)};a.isSaveAction=function(a){a=this.$3().getState(a);return a==b("SaveState").UNSAVED||a==b("SaveState").UNSAVING};a.isInTransition=function(a){a=this.$3().getState(a);return a==b("SaveState").SAVING||a==b("SaveState").UNSAVING};return a}();e.exports=a}),null); __d("ExternalShareTrackingEventFalcoEvent",["FalcoLoggerInternal","getSamplingPolicyConfig_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getSamplingPolicyConfig_DO_NOT_USE")("falco","external_share_tracking_event");c=b("FalcoLoggerInternal").create(a);e.exports=c}),null); __d("ExternalShareTracker",["ExternalShareTrackingConfig","ExternalShareTrackingEventFalcoEvent","Random","gkx"],(function(a,b,c,d,e,f){"use strict";var g={maybeAppendTrackingParam:function(a,c,d,e){if(!g._shouldAppendExternalShareParam())return a;a=a.addQueryData((a={},a[b("ExternalShareTrackingConfig").shareParam]=g._genExternalTrackingID(),a));g._logData(a,c,d,e);return a},_shouldAppendExternalShareParam:function(){return b("gkx")("1136644")},_genExternalTrackingID:function(){var a="",c=b("ExternalShareTrackingConfig").characterSet,d=c.length;for(var e=0;e<b("ExternalShareTrackingConfig").idSize;e++)a+=c.charAt(b("Random").uint32()%d);return a},_logData:function(a,c,d,e){var f={url:a.toString(),entry_point:c,content_location:d,intent:e};b("ExternalShareTrackingEventFalcoEvent").log(function(){return f})}};e.exports=g}),null); __d("MCompositionShareFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ID:"ID",APP_ID:"APP_ID",INTERNAL_EXTRA:"INTERNAL_EXTRA",FEEDBACK_SOURCE:"FEEDBACK_SOURCE",DISABLED_LINKS:"DISABLED_LINKS",SHARE_URI:"SHARE_URI",LINK_NO_CHANGE:"LINK_NO_CHANGE",MSITE_PHOTO_URL:"MSITE_PHOTO_URL",MSITE_VIDEO_URL:"MSITE_VIDEO_URL",ATTACHMENT_ID:"ATTACHMENT_ID"})}),null); __d("MShareToWhatsapp",["URI","goURI"],(function(a,b,c,d,e,f){"use strict";var g,h="https://api.whatsapp.com/send",i="text";a={WhatsappSendApiString:h,WhatsappSendApiParam:i,sendToWhatsapp:function(a){a=new(g||(g=b("URI")))(h).addQueryData(i,a);b("goURI")(a)}};e.exports=a}),null); __d("XFbWatchShorturlCreateAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/create_fbwatch_short_url/",{})}),null); __d("MShareFlyout",["cx","fbt","CSS","DOM","ExternalShareTracker","MComposerEntry","MComposition","MCompositionShareFields","MFeedShareAnalytics","MLegacyDataStore","MModalDialog","MParent","MRequest","MShareToWhatsapp","MViewport","NTAnnounceSubscription","Stratcom","URI","Vector","XFbWatchShorturlCreateAsyncController","clearTimeout","ge","gkx","qex","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j="mufi-inline",k="share-one-click-button",l="share-post-one-click-button",m="share-with-message-button",n="share-in-a-private-message-button",o="oneClickShareResult",p=6e3,q="share-more-options-button",r="share-to-page-button",s="page_share_content_action",t="/a/sharer.php",u="/sharer-dialog.php",v="share-in-a-group-button",w,x,y,z,A,B,C,D,E={},F={},G=[],H,I,J,K,L,M,N;function a(a,c,d,e,f){if(w)return;Z();H=c;w=a;x=a.getRoot();I=d;c=e||{};M=c.bluebarNoOverlapBuffer;b("MModalDialog").init();b("MFeedShareAnalytics").init();fa(f)}function c(a){return}function O(a,c){c===void 0&&(c=null),b("MFeedShareAnalytics").onMenuOptionSelected(a,B,c,z),N=!0}function P(a){b("MModalDialog").isOpen()?b("MModalDialog").load(a):b("MModalDialog").open(a,Q)}function Q(a){!!a&&a.canceled&&b("MFeedShareAnalytics").onShareAbandoned()}function R(){var a=new(b("MRequest"))(t);a.setMethod("POST");a.addData({m:"oneclick",privacyx:H,sid:z,shareID:z,fs:B,fr:C,internal_preview_image_id:y,should_share_post:L,direct:!0,_ft_:D});a.send();O("oneclick");w.hide()}function S(){if(I){var a={};a.ID=z;a.FEEDBACK_SOURCE=B;a[b("MCompositionShareFields").FEEDBACK_REFERRER]=C;var c={};c.composer_type="share";c.composertitle=h._("Share");c.contextualmessage=h._("Share on your Timeline");c.placeholder=h._("Write something...");c.disable_photos=!0;var d=b("MViewport").getScrollTop();b("MComposerEntry").invoke(new(b("MComposition"))().setStoreData("CONFIG",c).setStoreData("SHARE",a))["finally"](function(){return b("MViewport").scrollTo(0,d)})}else P(new(i||(i=b("URI")))(u).setQueryData({fs:B,fr:C,sid:z,_ft_:D,internal_preview_image_id:y}).toString()),O("self"),w.hide()}function T(a){P(new(i||(i=b("URI")))(u).setQueryData({fs:B,fr:C,m:a,sid:z,_ft_:D,internal_preview_image_id:y,selected_page_id:K}).toString()),O(a),w.hide()}function U(){P(new(i||(i=b("URI")))(u).setQueryData({fs:B,fr:C,m:"message",sid:z,u:window.location.href,internal_preview_image_id:y,referrer:"feed_story_share_as_message"}).toString()),O("message",A),w.hide()}function aa(){var a=new(i||(i=b("URI")))(A);if(A.startsWith("/")){var c,d="scmts",e="scwspsdd";a=new(i||(i=b("URI")))("http://www.facebook.com"+A).addQueryData((c={},c[d]=e,c))}d=b("ExternalShareTracker").maybeAppendTrackingParam(a,"sdd",B,"share_to_whatsapp").toString();B===60&&b("gkx")("1059928")?X(A,"w",a.toString(),V):V(d,a.toString())}function V(a,c){b("MShareToWhatsapp").sendToWhatsapp(a),O("whatsapp_message",c),w.hide()}function ba(a){if(typeof navigator.share!=="function"){w.hide();return}A=ca(A);B===60&&b("gkx")("1059928")?X(A,null,A,W):W(A,A)}function W(a,b){a={url:a};navigator.share(a).then(function(){})["catch"](function(a){});O("moreoptions",b);w.hide()}function ca(a){a+=a.includes("?")?"&":"?";a+="sfnsm=mo";return a}function da(a,b){a+=a.includes("?")?"&":"?";a+="vh=e&s="+J;b&&(a+="&d="+b);return a}function X(a,c,d,e){a=da(a,c);c=b("XFbWatchShorturlCreateAsyncController").getURIBuilder().getURI();a={destination_url:encodeURIComponent(a)};c=new(b("MRequest"))(c).setMethod("POST");c.setData(a);c.listen("done",function(a){a=(a=a.payload)!=null?a:d;e(a,d)});c.send()}function ea(a,b){a=b&&b.is_comment_share;b=["share-more-options-button","share-in-a-group-button","share-to-page-button","share-with-message-button"];a&&!E[z]?(Y("share-one-click-button",!1),Y("share-post-one-click-button",!1)):L?(Y("share-one-click-button",!1),b.push("share-post-one-click-button")):(b.push("share-one-click-button"),Y("share-post-one-click-button",!1))}function Y(a,b){a=document.getElementById(a);a!==null&&(a.style.display=b?"":"none")}function fa(a){var c;G=[w.addListener("beforeshow",function(){if(M!=null){var c=b("MViewport").getScrollTop();c<M&&b("ge")("header")?w.setAutoflipTopOffset(M-c):w.setAutoflipTopOffset(0)}c=w.getContext();var d=b("MLegacyDataStore").get(c);L=d.reshare_post;z=d&&d.share_id;B=d&&d.feedback_source;C=d&&d.feedback_referrer;y=d&&d.internal_preview_image_id;A=d&&d.shareable_uri;J=d&&d.user_id;var e=b("MParent").bySigil(c,"story-div");a?D=a:D=e?b("MLegacyDataStore").get(e).linkdata:null;z&&(E[z]=ga(c));b("MFeedShareAnalytics").onMenuOpened();N=!1;ea(x,d)}),w.addListener("hide",function(){N||b("MFeedShareAnalytics").onShareAbandoned()}),(c=b("Stratcom")).listen("click",k,R),c.listen("click",l,R),c.listen("click",m,S),c.listen("click",n,U),c.listen("click","share-to-whatsapp",aa),c.listen("click",r,function(){T("page")}),c.listen("click",v,function(){T("group")}),c.listen("click",q,function(){ba(A)}),c.listen("m:page:unload",null,Z),b("NTAnnounceSubscription").subscribe(s,function(a){a=JSON.parse(a),z=a.content_id,K=a.page_id,T("page")})]}function Z(){w=null;for(var a in F)b("clearTimeout")(F[a]);F={};while(G.length){var c=G.pop();c&&c.remove&&c.remove()}}function ga(a){if(!a||a===document||a instanceof DocumentFragment)return null;return b("Stratcom").hasSigil(a,j)?a:b("MParent").bySigil(a,j)}function $(a,c){var d=b("DOM").scry(a,"div",o);d[0]&&b("DOM").remove(d[0]);d=b("DOM").create("div",{className:"_4_m7"},c);b("Stratcom").addSigil(d,o);b("DOM").appendContent(a,d);return d}function d(c,a){var d=E[a];delete E[a];if(!d)return;var e=$(d,c);c=b("Vector").getPos(d);d=b("Vector").getDim(d).y;var f=b("MViewport").getScrollTop(),g=b("MViewport").getScrollHeight();(c.y<f||c.y+d>f+g)&&b("MViewport").scrollTo(c.x,c.y-250);F[a]=b("setTimeoutAcrossTransitions")(function(){delete F[a],b("DOM").remove(e)},p)}function f(c,a){var d=E[a];delete E[a];if(!d)return;if(b("Vector").getPos(d).y>=b("MViewport").getScrollTop()){var e=$(d,c);F[a]=b("setTimeoutAcrossTransitions")(function(){delete F[a],b("Vector").getPos(d).y>=b("MViewport").getScrollTop()&&b("DOM").remove(e)},p)}}e.exports={init:a,initMisinfo:c,onSuccess:f,onFailure:d}}),null); __d("MUFI",["ClientIDs","MLiveData","MSiteUFICommentSimpleSubscription","MSiteUFILikeSubscription","Stratcom","UFICommentLikeSubscription","UFIReactionsUtils","destroyOnUnload"],(function(a,b,c,d,e,f){var g=[null,null],h=1,i=[],j=function(a,c){var d=b("UFICommentLikeSubscription").subscribe(a,function(b){m(a,b,Date.now()-c)});i.push(d)},k=function(a,c){var d=b("MSiteUFILikeSubscription").subscribe(a,function(b){n(a,b,Date.now()-c)});i.push(d)},l=function(a,c){var d=b("MSiteUFICommentSimpleSubscription").subscribe(a,function(b){o(a,b,Date.now()-c)});i.push(d)},m=function(a,b,c){a=b&&b.comment_like_subscribe&&b.comment_like_subscribe.feedback;if(!a)return;q({action_data:{action_type:"m-action-like-comment",client_id:b.comment_like_subscribe.client_mutation_id},feedback_data:{ft_ent_identifier:a.legacy_comment_token,has_viewer_liked:a.does_viewer_like,like_count:a.likers?a.likers.count:0,request_id:null}})},n=function(a,c,d){d=c&&c.feedback_like_subscribe&&c.feedback_like_subscribe.feedback;if(!d)return;var e=d.viewer_feedback_reaction_info?d.viewer_feedback_reaction_info.key:0,f=d.viewer_likes_reaction_sentence,i=d.viewer_does_not_like_reaction_sentence,j=b("UFIReactionsUtils").getReactionCountMapFromSummary(d.reactions_summary),k={},l=!!e,m=j[h]["default"];e?(k.current=f,k.alternate=i):(k.current=i,k.alternate=f);q({action_data:{action_type:"m-action-like",client_id:c.feedback_like_subscribe.client_mutation_id},feedback_data:{ft_ent_identifier:a,has_viewer_liked:l,like_count:m,like_fallback:!0,like_sentences:g,like_friend_sentences:g,like_counts:g,request_id:null,viewerreaction:e,reactioncount:d.reactors?d.reactors.count:0,reactionsentences:k,reactioncountmap:j}})},o=function(a,c,d){d=c&&c.comment_create_subscribe&&c.comment_create_subscribe.comment;if(!d||!a)return;var e=d.legacy_token;c=c.comment_create_subscribe.client_mutation_id;c=c&&b("ClientIDs").isExistingClientID(c);if(c)return;c=!!d.comment_parent;if(c)return;d=Object.keys(b("MLiveData").get(e).getData()).length;if(d!==0)return;b("Stratcom").invoke("m:ufi:live-comments:new-comment",null,{commentToken:e,feedbackTargetID:a})},p=function(){for(var a=0;a<i.length;a++){var b=i[a];b&&b.unsubscribe()}i=[]};function q(a,c){c===void 0;c=a.feedback_data;var d=c&&c.ft_ent_identifier;if(d){a=a.action_data;if(a){var e=a.action_type,f=a.client_id&&b("ClientIDs").isExistingClientID(a.client_id);if(f)return;delete a.client_id;f=a.comment_id;if(e==="m-action-add-comment"&&!a.is_reply&&f){e=Object.keys(b("MLiveData").get(f).getData()).length;if(e!==0)return;e=b("MLiveData").get(d).getData().comments||[];e.push(f);c.comments=e;b("MLiveData").set(f,a)}}b("MLiveData").update(d,c)}}function a(a,c){if(!c.gqls)return;var d=Date.now();c.likes&&k(a,d);c.comments&&l(a,d);c.comment_likes&&j(a,d);b("destroyOnUnload")(p)}e.exports={addAction:q,init:a}}),null); __d("MUFIComposerFocus",["DOM","MLegacyDataStore","MParent","Parent","Stratcom"],(function(a,b,c,d,e,f){"use strict";var g="mufi-composer-focus",h;function i(a){a=a;var b=a.parentNode,c=[];while(b)c.unshift(a),a=b,b=a.parentNode;return c}function j(a,b){var c=Math.min(a.length,b.length)-1;for(var c=c;c>=0;c--)if(a[c]===b[c])return c;return-1}function k(a){if(!a)return null;var c=b("MParent").bySigil(a,"story-div")||b("MParent").bySigil(a,"snowflake-root")||b("MParent").bySigil(a,"notes-root");if(!c)return null;c=b("DOM").scry(c,"*","mufi-composer").filter(function(a){return!b("MParent").bySigil(a,"m-inline-reply-composer")});if(c.length===1)return c[0];var d=i(a);a=c.reduce(function(a,b,c){c=i(b);c=j(d,c);return c>=a[0]?[c,b]:a},[-1,null]);return a[1]}function l(a){var b=a.getNode(g);if(!(b instanceof HTMLElement))return;b=k(b);b&&(a.prevent(),b.focus())}function a(a){if(!a||!h)return!1;a=b("Stratcom").hasSigil(a,g)?a:b("MParent").bySigil(a,g);return!!k(a)}function m(a){a=a.getNode(g);if(!(a instanceof HTMLElement))return;var c=k(a);if(c){var d=b("MParent").bySigil(a,"touchable");d&&(b("MLegacyDataStore").get(d).nativeClick=!0);d=b("Parent").byTag(a,"a");d instanceof HTMLAnchorElement&&(d.href="#"+b("DOM").uniqID(c))}}function c(){h||(b("Stratcom").listen("touchstart",g,m),b("Stratcom").listen("click",g,l),h=!0)}e.exports={init:c,isInitialized:function(){return h},isComposerFocusTrigger:a}}),null); __d("MUFILikeButton",["cx","ActorURI","CSS","DOM","MLegacyDataStore","MLiveData","MParent","MUFIReactionsUtils","MUFIRequest","Stratcom","SubscriptionsHandler","emptyFunction"],(function(a,b,c,d,e,f,g){var h={is_like:1},i={is_like:0};a=function(){"use strict";function a(a,c,d,e){this.$1=a,this.$2=b("MLiveData").get(c),this.$4=c,this.$5=d||{log:b("emptyFunction")},this.$6=e,this.$7=b("MUFIReactionsUtils").getConfigForBackgroundRetry(c),this.$3=new(b("SubscriptionsHandler"))(),this.$3.addSubscriptions(b("DOM").listen(this.$1,"click",null,this.onClick.bind(this)),this.$2.listen("change",this.onChange.bind(this)),b("Stratcom").listen("m:page:unload",null,this.onUnload.bind(this)))}var c=a.prototype;c.onChange=function(){var a=this.$2.getData();if(a.request_id===this.$6)return;a=a.has_viewer_liked;b("CSS").conditionClass(this.$1,"_77la",a);b("Stratcom").removeSigil(this.$1,a?"like":"unlike");b("Stratcom").addSigil(this.$1,a?"unlike":"like")};c.getFeedbackData=function(){var a=this.$2.getData(),b=a.has_viewer_liked,c=b?a.like_count-1:a.like_count+1,d=a.reduced_like_count;isNaN(d)||(d=c.toString());return{has_viewer_liked:!b,like_count:c,like_counts:[a.like_counts[1]||null,a.like_counts[0]],like_friend_sentences:[a.like_friend_sentences[1]||null,a.like_friend_sentences[0]],like_sentences:[a.like_sentences[1]||null,a.like_sentences[0]],reduced_like_count:d}};c.getRequestData=function(){return null};c.onClick=function(a){a.prevent();var c=a.getNode("tag:a");c||(c=a.getNode("tag:div"));if(!c)return;a=b("MUFIRequest").getURI(c.getAttribute("href")||c.getAttribute("data-uri"));this.$2.getData().has_viewer_liked?(a.addQueryData("ul",!0),a.removeQueryData("reaction_type")):a.removeQueryData(["ul","reaction_type"]);c=b("MParent").bySigil(this.$1,"feed-ufi-metadata");if(c){c=b("MLegacyDataStore").get(c).actor_id;c&&(a=b("ActorURI").create(a,String(c)))}b("MUFIRequest").send(this.$4,this.getFeedbackData(),a,this.getRequestData(),this.$7);this.$5.log("like",void 0,this.$2.getData().has_viewer_liked?i:h)};c.onUnload=function(){this.$3.release(),this.$3=null};return a}();e.exports=a}),null); __d("MUFIReactionButton",["cx","fbt","CSS","DOM","MLiveData","MPageController","MUFILikeButton","MUFIReactionsUtils","Stratcom","Style","UFIReactionIcons","UFIReactionTypes","XCIXActorFeatureLimitNoticeController","createIxElement"],(function(a,b,c,d,e,f,g,h){var i=1,j=0,k=16;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g,h,i,j){h=a.call(this,c,d,e,f)||this;h.$MUFIReactionButton1=c;h.$MUFIReactionButton2=b("MLiveData").get(d);h.$MUFIReactionButton3=d;h.$MUFIReactionButton4=f;h.$MUFIReactionButton5=g||k;h.$MUFIReactionButton6=j||{has_active_feature_limit_notice:!1};c.href&&c.setAttribute("data-uri",c.href);c.removeAttribute("href");return h}var d=c.prototype;d.onChange=function(){var a=this.$MUFIReactionButton2.getData();if(a.request_id===this.$MUFIReactionButton4)return;var c,d;a=a.viewerreaction;var e=!!a;a&&!b("UFIReactionTypes").reactions[a]&&(a=null);if(!a)c="inherit",d=h._("Like");else{var f=null;if(a!==i){var g=b("UFIReactionIcons")[a][this.$MUFIReactionButton5];g||(g=b("UFIReactionIcons")[a][k]);f=b("createIxElement")(g);b("CSS").addClass(f,"_4h-b")}c=b("UFIReactionTypes").reactions[a].color;g=b("UFIReactionTypes").reactions[a].display_name;d=[f,g]}b("DOM").setContent(this.$MUFIReactionButton1,d);this.$MUFIReactionButton1.setAttribute("aria-pressed",e);b("CSS").conditionClass(this.$MUFIReactionButton1,"_77ld",e&&a!==i);b("CSS").conditionClass(this.$MUFIReactionButton1,"_77la",e&&a===i);b("Style").set(this.$MUFIReactionButton1,"color",c);b("Stratcom").removeSigil(this.$MUFIReactionButton1,e?"like":"unlike");b("Stratcom").addSigil(this.$MUFIReactionButton1,e?"unlike":"like");b("Stratcom").invoke("ufi/reactionButtonClicked",null,this.getRequestData())};d.getFeedbackData=function(){var a=this.$MUFIReactionButton2.getData();return b("MUFIReactionsUtils").getReactionData(a,a.has_viewer_liked||a.viewerreaction?j:i)};d.getRequestData=function(){var a=this.$MUFIReactionButton2.getData(),b=a.has_viewer_liked||a.viewerreaction;return{reaction_type:b?j:i,ft_ent_identifier:a.ft_ent_identifier}};d.onClick=function(c){if(this.$MUFIReactionButton6.has_active_feature_limit_notice){var d=b("XCIXActorFeatureLimitNoticeController").getURIBuilder().setEnum("sentry_category","like_add").getURI();b("MPageController").load(d);return}if(b("Stratcom").hasSigil(this.$MUFIReactionButton1,"kaios-like-react-trigger")){d=this.$MUFIReactionButton2.getData();d.viewerreaction&&c.stop()}a.prototype.onClick.call(this,c)};return c}(b("MUFILikeButton"));e.exports=a}),null); __d("MActionBubbleHelper",["cx","BanzaiODS","CSS","Stratcom"],(function(a,b,c,d,e,f,g){var h="enabled_action";e.exports.toggleActionBubbleItem=function(a,c,d,e){b("BanzaiODS").bumpEntityKey(2966,"rrsurfaces","action_bubble.toggle_action."+String(c)+"."+d+"."+e),b("CSS").conditionClass(a,"_58a0",c),c?b("Stratcom").addSigil(a,h):b("Stratcom").removeSigil(a,h)}}),null); __d("ReactDOMComet",["requireCond","cr:1108857","cr:1294159"],(function(a,b,c,d,e,f){a={createPortal:b("cr:1294159").createPortal,unstable_batchedUpdates:b("cr:1294159").unstable_batchedUpdates,flushSync:b("cr:1294159").flushSync,createRoot:b("cr:1294159").createRoot,createBlockingRoot:b("cr:1294159").createBlockingRoot,unstable_discreteUpdates:b("cr:1294159").unstable_discreteUpdates,unstable_flushDiscreteUpdates:b("cr:1294159").unstable_flushDiscreteUpdates,unstable_flushControlled:b("cr:1294159").unstable_flushControlled,unstable_scheduleHydration:b("cr:1294159").unstable_scheduleHydration,unstable_createEventHandle:b("cr:1294159").unstable_createEventHandle};e.exports=a}),null); __d("MqttLongPollingHookCollection",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onPollRequestSent=function(){this.$1.forEach(function(a){a.onPollRequestSent()})};b.onPollRequestSuccess=function(){this.$1.forEach(function(a){a.onPollRequestSuccess()})};b.onPollResponse=function(a){this.$1.forEach(function(b){b.onPollResponse(a)})};b.onPollFinish=function(){this.$1.forEach(function(a){a.onPollFinish()})};b.onPollRequestFailed=function(a){this.$1.forEach(function(b){b.onPollRequestFailed(a)})};return a}();e.exports=a}),null); __d("PromiseResult",["Promise"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){var a=this;this.promise=new(b("Promise"))(function(b,c){a.$1=b,a.$2=c})}var c=a.prototype;c.resolve=function(a){this.$1(a)};c.reject=function(a){this.$2(a)};return a}();e.exports=a}),null); __d("MqttFetchClient",["Promise","MqttEnv","MqttProtocolCodec","MqttUtils","PromiseResult"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env,h=b("MqttProtocolCodec").WireMessage,i=b("MqttProtocolCodec").decodeByteMessages,j=b("MqttProtocolCodec").MESSAGE_TYPE,k="fetch_pull",l="fetch_pull_finish",m="fetch_",n=6e4,o="action",p="chunked",q="send",r="true",s=5,t=20,u=10,v=5e3;a=function(){function a(){this.$1="",this.$2=g.getLoggerInstance(),this.$3=0,this.$4="",this.$6=function(){},this.$7=function(a){},this.$8=function(){},this.$9=function(a){},this.$10=0,this.$11=0,this.$12=0,this.$13=0,this.$14="Ready",this.$15=[],this.$16=[],this.$17=null,this.$18=!1,this.$19=0}a.isSupported=function(){return typeof fetch==="function"};var c=a.prototype;c.run=function(a,c,d,e,f,g,h,i){this.$1=b("MqttUtils").endpointWithSessionId(a,c),this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7=g,this.$8=h,this.$9=i,this.$20()};c.isTopicSupported=function(a){return!0};c.publish=function(a,c){if(this.$14!=="ReceivingData"){this.$2.bumpCounter(m+"publish."+a+".invalidstate");return b("Promise").reject("not connected")}else{this.$2.bumpCounter(m+"publish."+a+".publish");var d=new(b("PromiseResult"))();a={topic:a,payload:c,promiseResult:d};this.$15.push(a);this.$21();return d.promise}};c.abort=function(){this.$6=function(){},this.$7=function(a){},this.$8=function(){},this.$9=function(a){}};c.$22=function(a){var b=this;a.forEach(function(a){b.$2.bumpCounter(m+"publish."+a.topic+".resolved"),a.promiseResult.resolve()});this.$12+=a.length};c.$23=function(a,b){var c=this;a.forEach(function(a){c.$2.bumpCounter(m+"publish."+a.topic+".rejected"),a.promiseResult.reject(b)})};c.$24=function(a,b,c,d){var e=a.map(function(a){return a.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request failed. Publishes:"+e+", retry:"+c);this.$2.bumpCounter(m+"publish_request_failed");this.$14!="ReceivingData"||c===s?(this.$23(a,d),this.$18=!1,this.$2.bumpCounter(m+"publish_request_failed_final"),this.$21()):this.$25(a,b,c+1)};c.$26=function(a,b,c,d){if(!d.ok){this.$2.bumpCounter(m+"publish_request_failed.http."+d.status);if(d.status===409){this.$19++;if(this.$19>=u){this.$2.bumpCounter(m+"409_reset");this.$27(new Error("Too many 409 errors"));return}}this.$24(a,b,c,this.$28(d));return}this.$2.bumpCounter(m+"publish_request_success");b=a.map(function(a){return a.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request success. Publishes:"+b+", retry:"+c);this.$22(a);this.$18=!1;this.$21()};c.$21=function(){if(this.$14!="ReceivingData")return;if(this.$18)return;if(this.$15.length==0&&this.$16.length==0)return;this.$18=!0;var a=this.$15.slice(0,t);this.$15=this.$15.slice(t,this.$15.length);clearTimeout(this.$17);this.$17=null;var b=this.$16.slice(0,t);this.$16=this.$16.slice(t,this.$16.length);this.$25(a,b,0)};c.$25=function(a,c,d){var e=this,f=a.map(function(a){return a.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request sent. Publishes:"+f+", retry:"+d);f=b("MqttUtils").endpointWithExtraParameter(this.$1,o,q);var h=a.map(function(a){return{topic:a.topic,payload:a.payload,qos:0,messageId:g.random()}});h=this.$5.gen(this.$3,[],h,c);this.$2.bumpCounter(m+"publish_request");b("MqttUtils").promiseDoneWithTimeout(fetch(f,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:h,keepalive:!1}),function(b){return e.$26(a,c,d,b)},function(b){return e.$24(a,c,d,b)},n)};c.$29=function(a){a=a.message;this.$2.debugTrace("FetchClient","Fetch request failed with error:"+a);this.$9(a);this.$30(!1,a);this.$2.bumpCounter(m+"error");this.$14="Error"};c.$31=function(a){var b=this;this.$2.debugTrace("FetchClient","Fetch response data received");a=i(new Uint8Array(a));a=a.messages;var c=a.filter(function(a){return a.messageType===j.PINGREQ});a=a.filter(function(a){return a.messageType===j.PUBLISH}).map(function(a){if(!(a instanceof h.Publish))return{};a=a;a.qos===1&&a.messageIdentifier!=null&&(b.$16.push(a.messageIdentifier),b.$17==null&&(b.$17=g.setTimeout(function(){b.$21()},v)));return{topic:a.topic,payload:a.payloadMessage.payloadString,qos:a.qos}});for(var d=a,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(e){if(f>=d.length)break;k=d[f++]}else{f=d.next();if(f.done)break;k=f.value}k=k;this.$2.bumpCounter(m+"response_"+k.topic)}a&&a.length>0&&(this.$13+=a.length,this.$7(a));c&&c.length>0&&this.$32()};c.$32=function(){this.$2.debugTrace("FetchClient","Got server ping request"),this.$2.bumpCounter(m+"ping")};c.$27=function(a){this.$2.debugTrace("FetchClient","Fetch request ended: "+a.toString()),this.$2.bumpCounter(m+"done"),this.$33(a.message),this.$8(),this.$14="Done"};c.$34=function(a,c,d){var e=this;if(d!==null&&d!==void 0)try{this.$31(d)}catch(a){this.$27(a);this.$2.bumpCounter(m+"dataDecodeException");return}if(c){this.$27(new Error("EOF"));return}b("MqttUtils").promiseDone(a.read(),function(c){var b=c.done;c=c.value;return e.$34(a,b,c)},function(a){return e.$27(a)})};c.$35=function(a){if(!a.ok){this.$2.bumpCounter(m+"error.http."+a.status);this.$29(this.$28(a));return}a=a.body;if(!a){this.$29(new Error("Empty body"));return}a=a.getReader();this.$6();this.$2.bumpCounter(m+"success");this.$30(!0,null);this.$11=Date.now();this.$14="ReceivingData";this.$2.debugTrace("FetchClient","Fetch request success");this.$34(a,!1,null)};c.$33=function(a){this.$2.eventLogPullFinish({pullEventName:l,sessionID:this.$3,duration:Date.now()-this.$11,errorMessage:a,publishReceived:this.$13,publishSent:this.$12})};c.$30=function(a,b){this.$2.eventLogPull({pullEventName:k,sessionID:this.$3,status:a,duration:Date.now()-this.$10,hostname:this.$1,errorMessage:b})};c.$20=function(){var a=this;if(this.$14!="Ready")return;this.$2.debugTrace("FetchClient","Sending fetch request");this.$2.bumpCounter(m+"request");this.$10=Date.now();var c=b("MqttUtils").endpointWithExtraParameter(this.$1,p,r);b("MqttUtils").promiseDoneWithTimeout(fetch(c,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:this.$4,keepalive:!1}),function(b){return a.$35(b)},function(b){return a.$29(b)},n)};c.$28=function(a){return new Error("Http error, status="+a.status)};return a}();e.exports=a}),null); __d("MqttLongPollingClient",["Promise","MqttEnv","MqttProtocolCodec","XHRRequest","getCrossOriginTransport"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env,h=b("MqttProtocolCodec").WireMessage,i=b("MqttProtocolCodec").decodeByteMessages,j=120*1e3,k="simple_pull";a=function(){function a(){this.$3="",this.$4=0,this.$2=g.getLoggerInstance(),this.$1="Ready",this.$5="",this.$7=function(){},this.$8=function(a){},this.$9=function(){},this.$10=function(a){},this.$11=0,this.$12=null,this.$13=new Set(["/t_ms","/messenger_sync_get_diffs","/messenger_sync_create_queue","/webrtc","/rtc_multi"])}var c=a.prototype;c.run=function(a,b,c,d,e,f,g,h){this.$3=a,this.$4=b,this.$5=c,this.$6=d,this.$7=e,this.$8=f,this.$9=g,this.$10=h,this.$14(this.$5)};c.isTopicSupported=function(a){return this.$13.has(a)};c.publish=function(a,c){return b("Promise").reject("not supported")};c.abort=function(){this.$12!=null&&this.$12.abort("Disconnected")};c.$15=function(a,b){if(this.$1===a)return;this.$1=a;a=="Error"&&b!=null&&this.$10(b)};c.$16=function(a){if(this.$1!="RequestSend")return;if(!a){this.$17("EmptyResponse",null);return}this.$7();this.$18(!0,null);this.$15("ResponseReceived");a=i(new Uint8Array(a));a=a.messages.filter(function(a){return a instanceof h.Publish}).map(function(a){if(a instanceof h.Publish){a=a;return{topic:a.topic,payload:a.payloadMessage.payloadString,qos:a.qos}}else return{}});this.$8(a);this.$9()};c.$17=function(a,b){b=b!=null?b.message:"null";this.$2.debugTrace("LongPollingClient Error","Poll failed with error:"+a+", errorMsg:"+b);this.$18(!1,a+":"+b);this.$15("Error",a)};c.$18=function(a,b){this.$2.eventLogPull({pullEventName:k,sessionID:this.$4,status:a,duration:Date.now()-this.$11,hostname:this.$3,errorMessage:b})};c.$14=function(a){var c=this;if(this.$1!="Ready"||this.$12)return;try{this.$11=Date.now(),this.$12=new(b("XHRRequest"))(this.$3).setResponseType("arraybuffer").setRawData(a).setTransportBuilder(b("getCrossOriginTransport").withCredentials).setResponseHandler(function(a){return c.$16(a)}).setNetworkFailureHandler(function(a){c.$17("Network",a)}).setErrorHandler(function(a){c.$17("Error",a)}).setAbortHandler(function(a){c.$17("Abort",null)}).setTimeoutHandler(function(){c.$17("Timeout",null)}).setTimeout(j).send(),this.$15("RequestSend")}catch(a){this.$17("Error",a)}};return a}();e.exports=a}),null); __d("exponentialBackoff",["MqttEnv"],(function(a,b,c,d,e,f){var g=b("MqttEnv").Env;function a(a,b){b===void 0&&(b=null);var c=null,d=0;function e(){for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];var i=function(){a.apply(b,f)};if(c===null){var j=Math.max(0,Math.pow(2,Math.min(d,6))*(1e3+g.random()*100)-2e3);c=g.setTimeout(function(){i(),c=null},j)}d++}e.reset=function(){d=0,c!=null&&(g.clearTimeout(c),c=null)};e.isPending=function(){return c!=null};return e}e.exports=a}),null); __d("MqttLongPollingRunner",["Promise","MqttEnv","MqttFetchClient","MqttLongPollingClient","MqttLongPollingHookCollection","MqttTypes","MqttUtils","exponentialBackoff"],(function(a,b,c,d,e,f){"use strict";var g=b("MqttEnv").Env,h=b("MqttEnv").MqttGkNames,i=b("MqttTypes").MqttChannelError,j=4,k=1e3,l=3e3,m="mqtt_should_longpoll",n="last_lp",o="yes",p="no";a=function(){function a(a,c,d,e,f,j,k,l,m){var n=this;this.$23=function(){try{if(!n.$29())return;var a=n.$30();n.$14=a;var c=n.$9(),d=n.$10();c=c.filter(function(b){return a.isTopicSupported(b)});d=d.filter(function(b){return a.isTopicSupported(b.topic)});if(c.length==0&&d.length==0){n.$5.debugTrace("LongPollingRunner","Poll skipped, nothing to do");n.$14=null;g.setTimeout(function(){n.$23()},1e3);return}var e=b("MqttUtils").generateSessionId();a.run(n.$6,e,n.$7.gen(e,c,d),n.$7,function(){return n.$31()},function(a){return n.$32(a)},function(){return n.$33()},function(a){return n.$34(a)});n.$19.onPollRequestSent();e=c.join(",");c=d.map(function(a){return a.topic}).join(",");n.$5.debugTrace("LongPollingRunner","Making a poll request to "+n.$6+". SubscribedTopics:"+e+". Publishes:"+c)}catch(a){a&&n.$5.logErrorWarn(a,"lp_js_error"),n.$11(new i(!1,"js error lp",a)),n.$34("lp_js_error")}};this.$6=a;this.$7=c;this.$1=e;this.$2=0;this.$3=d;this.$4=b("MqttUtils").hasWSSupport();this.$5=g.getLoggerInstance();this.$8=f;this.$9=j;this.$10=k;this.$11=l;this.$12=m;this.$13=!1;this.$14=null;this.$15="LPInactive";this.$16="NotSent";this.$17=0;this.$19=new(b("MqttLongPollingHookCollection"))();this.$18=new(b("exponentialBackoff"))(this.$23,this);this.$20=0;this.$21=p;a=g.genGk(h.mqtt_lp_use_fetch);c=b("MqttFetchClient").isSupported();a?this.$5.bumpCounter("fetch_gk_pass"):this.$5.bumpCounter("fetch_gk_fail");c?this.$5.bumpCounter("fetch_api_supported"):this.$5.bumpCounter("fetch_api_not_supported");this.$22=a&&c}var c=a.prototype;c.addHook=function(a){this.$19.addHook(a)};c.start=function(){var a=this;this.$21=g.configRead(n,p);this.$5.debugTrace("LongPollingRunner","Runner loaded, last status "+this.$21);this.$20=Date.now();this.$23();g.setTimeout(function(){a.$23()},k+100);g.setTimeout(function(){a.$23()},l+100)};c.canPublish=function(){return this.$15==="LPActive"&&this.$16==="ReceivingData"};c.publish=function(a,c,d){return g.genGk(h.mqtt_enable_publish_over_polling)&&(this.$14&&this.$14.isTopicSupported(a))?this.$14.publish(a,c):b("Promise").reject()};c.onConnectAttempt=function(){};c.onConnectFailure=function(){this.$2++,this.$23()};c.onConnected=function(){};c.onConnectSuccess=function(){this.$1=!0,g.configWrite(n,null)};c.onConnectionLost=function(){};c.onSubscribe=function(a){};c.onUnsubscribe=function(a){};c.onPublish=function(a){};c.onMessage=function(a){};c.onWSFatal=function(){this.$3=!0,this.$23()};c.getStatus=function(){return this.$15};c.getRequestStatus=function(){return this.$16};c.$24=function(a){a!=this.$15&&(this.$5.debugTrace("LongPollingRunner","status changed to "+a+" from "+this.$15),this.$15=a,this.$12(this.$15,this.$16))};c.$25=function(a){if(!this.$22)return;a!==this.$16&&(this.$5.debugTrace("LongPollingRunner","request status changed to "+a+" from "+this.$16),this.$16=a,this.$12(this.$15,this.$16))};c.$26=function(){this.$17=0};c.$27=function(){this.$17++,this.$17>=j&&this.$24("LPError")};c.$28=function(){var a=g.genGk(h.mqtt_lp_no_delay),b=g.genGk(h.mqtt_ws_polling_enabled),c=g.genGk(h.mqtt_fast_lp);this.$5.debugTrace("LongPollingRunner","_shouldPoll? pollNow:"+String(a)+" enabled:"+String(b)+" fastPoll:"+String(c)+" hasWSSupport:"+String(this.$4)+" hasSuccess:"+String(this.$1)+" failureCount:"+this.$2+" wsFatal:"+String(this.$3));if(!b)return!1;if(a){this.$5.bumpCounter(m+".nd");return!0}if(!this.$4){this.$5.bumpCounter(m+".na");return!0}if(this.$3){this.$5.bumpCounter(m+".fatal");return!0}if(this.$1)return!1;if(c){b=Date.now()-this.$20;if(this.$21===o){if(this.$2>=1)return!0;if(b>k){this.$5.bumpCounter(m+".fastdelay");return!0}}else if(b>l){this.$5.bumpCounter(m+".regulardelay");return!0}}if(this.$2>=3){this.$5.bumpCounter(m+".failure");return!0}return!1};c.$29=function(){if(this.$14!=null)return!1;var a=this.$28();!this.$13&&a&&(this.$5.bumpCounter("polling_kickin"),this.$13=!0,this.$24("LPActive"),this.$26());this.$13&&!a&&(this.$5.bumpCounter("polling_stopped"),this.$13=!1,this.$24("LPInactive"),this.$26());return a};c.$30=function(){if(this.$22){this.$5.debugTrace("LongPollingRunner","Creating polling client using Fetch API");return new(b("MqttFetchClient"))()}else{this.$5.debugTrace("LongPollingRunner","Creating regular Polling client");return new(b("MqttLongPollingClient"))()}};c.$31=function(){this.$5.debugTrace("LongPollingRunner","Poll success"),this.$19.onPollRequestSuccess(),this.$18.reset(),this.$24("LPActive"),this.$26(),g.configWrite(n,o),this.$25("ReceivingData")};c.$32=function(a){var b=a.map(function(a){return a.topic}).join(",");this.$5.debugTrace("LongPollingRunner","Poll response received, message received:"+b);for(var b=0;b<a.length;b++){var c=a[b];this.$19.onPollResponse(c.topic);this.$8(c.topic,c.payload,c.qos)}};c.$33=function(){this.$5.debugTrace("LongPollingRunner","Poll finish"),this.$19.onPollFinish(),this.$14&&this.$14.abort(),this.$14=null,this.$23(),this.$25("NotSent")};c.$34=function(a){this.$19.onPollRequestFailed(a),this.$14&&this.$14.abort(),this.$14=null,this.$18(),this.$27(),this.$25("NotSent")};return a}();e.exports=a}),null);
